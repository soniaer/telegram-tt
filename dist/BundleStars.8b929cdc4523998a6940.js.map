{"version":3,"file":"BundleStars.8b929cdc4523998a6940.js","mappings":"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","sources":["webpack://telegram-t/./src/bundles/stars.ts","webpack://telegram-t/./src/components/common/BadgeButton.tsx","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.tsx","webpack://telegram-t/./src/components/modals/gift/GiftComposer.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemPremium.tsx","webpack://telegram-t/./src/components/modals/gift/GiftItemStar.tsx","webpack://telegram-t/./src/components/modals/gift/GiftModal.tsx","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.tsx","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.tsx","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.tsx","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.tsx","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.tsx","webpack://telegram-t/./src/components/modals/stars/BalanceBlock.tsx","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.tsx","webpack://telegram-t/./src/components/modals/stars/StarsPaymentModal.tsx","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.tsx","webpack://telegram-t/./src/components/modals/stars/helpers/transaction.ts","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.tsx","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.tsx","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.tsx","webpack://telegram-t/./src/util/localization/format.tsx","webpack://telegram-t/./src/components/common/BadgeButton.module.scss?da7b","webpack://telegram-t/./src/components/main/premium/StarsGiftingPickerModal.module.scss?3156","webpack://telegram-t/./src/components/modals/gift/GiftComposer.module.scss?dac8","webpack://telegram-t/./src/components/modals/gift/GiftItem.module.scss?c564","webpack://telegram-t/./src/components/modals/gift/GiftModal.module.scss?fd13","webpack://telegram-t/./src/components/modals/gift/StarGiftCategoryList.module.scss?7d19","webpack://telegram-t/./src/components/modals/gift/info/GiftInfoModal.module.scss?4f0e","webpack://telegram-t/./src/components/modals/gift/recipient/GiftRecipientPicker.module.scss?b7e9","webpack://telegram-t/./src/components/modals/paidReaction/PaidReactionModal.module.scss?80b2","webpack://telegram-t/./src/components/modals/paidReaction/StarSlider.module.scss?b8f3","webpack://telegram-t/./src/components/modals/stars/StarsBalanceModal.module.scss?bbd4","webpack://telegram-t/./src/components/modals/stars/gift/StarsGiftModal.module.scss?069e","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionItem.module.scss?74b5","webpack://telegram-t/./src/components/modals/stars/subscription/StarsSubscriptionModal.module.scss?5025","webpack://telegram-t/./src/components/modals/stars/transaction/PaidMediaThumb.module.scss?605d","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionItem.module.scss?b947","webpack://telegram-t/./src/components/modals/stars/transaction/StarsTransactionModal.module.scss?a215"],"sourcesContent":["export { default as StarsGiftModal } from '../components/modals/stars/gift/StarsGiftModal';\nexport { default as StarsGiftingPickerModal } from '../components/main/premium/StarsGiftingPickerModal';\nexport { default as StarsBalanceModal } from '../components/modals/stars/StarsBalanceModal';\nexport { default as StarPaymentModal } from '../components/modals/stars/StarsPaymentModal';\nexport { default as StarsTransactionInfoModal } from '../components/modals/stars/transaction/StarsTransactionModal';\nexport { default as StarsSubscriptionModal } from '../components/modals/stars/subscription/StarsSubscriptionModal';\nexport { default as PaidReactionModal } from '../components/modals/paidReaction/PaidReactionModal';\nexport { default as GiftModal } from '../components/modals/gift/GiftModal';\nexport { default as GiftRecipientPicker } from '../components/modals/gift/recipient/GiftRecipientPicker';\nexport { default as GiftInfoModal } from '../components/modals/gift/info/GiftInfoModal';\n","import React from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './BadgeButton.module.scss';\n\ntype OwnProps = {\n  children: React.ReactNode;\n  className?: string;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n};\n\nconst BadgeButton = ({\n  children,\n  className,\n  onClick,\n}: OwnProps) => {\n  return (\n    <div className={buildClassName(styles.root, className)} onClick={onClick}>\n      {children}\n    </div>\n  );\n};\n\nexport default BadgeButton;\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useMemo,\n  useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport { SERVICE_NOTIFICATIONS_USER_ID } from '../../../config';\nimport {\n  filterUsersByName, isDeletedUser, isUserBot,\n} from '../../../global/helpers';\nimport { unique } from '../../../util/iteratees';\nimport sortChatIds from '../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport PeerPicker from '../../common/pickers/PeerPicker';\nimport PickerModal from '../../common/pickers/PickerModal';\n\nimport styles from './StarsGiftingPickerModal.module.scss';\n\nexport type OwnProps = {\n  isOpen?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userIds?: string[];\n  activeListIds?: string[];\n  archivedListIds?: string[];\n}\n\nconst StarsGiftingPickerModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  currentUserId,\n  activeListIds,\n  archivedListIds,\n  userIds,\n}) => {\n  const { closeStarsGiftingPickerModal, openStarsGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const combinedIds = [\n      ...(userIds || []),\n      ...(activeListIds || []),\n      ...(archivedListIds || []),\n    ];\n\n    const filteredContactIds = filterUsersByName(combinedIds, usersById, searchQuery);\n\n    return sortChatIds(unique(filteredContactIds).filter((id) => {\n      const user = usersById[id];\n\n      if (!user) {\n        return false;\n      }\n\n      return !user.isSupport\n        && !isUserBot(user) && !isDeletedUser(user)\n        && id !== currentUserId && id !== SERVICE_NOTIFICATIONS_USER_ID;\n    }));\n  }, [currentUserId, searchQuery, userIds, activeListIds, archivedListIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((newSelectedId?: string) => {\n    if (newSelectedId?.length) {\n      openStarsGiftModal({ forUserId: newSelectedId });\n      closeStarsGiftingPickerModal();\n    }\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeStarsGiftingPickerModal}\n      title={oldLang('GiftStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n      confirmButtonText={oldLang('Continue')}\n      onEnter={closeStarsGiftingPickerModal}\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n        onSelectedIdChange={handleSelectedUserIdsChange}\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const {\n    chats: {\n      listIds,\n    },\n    currentUserId,\n  } = global;\n\n  return {\n    userIds: global.contactList?.userIds,\n    activeListIds: listIds.active,\n    archivedListIds: listIds.archived,\n    currentUserId,\n  };\n})(StarsGiftingPickerModal));\n","import type { ChangeEvent } from 'react';\nimport React, {\n  memo, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiMessage, ApiUser } from '../../../api/types';\nimport type { GiftOption } from './GiftModal';\n\nimport { STARS_CURRENCY_CODE } from '../../../config';\nimport { getUserFullName } from '../../../global/helpers';\nimport { selectTabState, selectTheme, selectUser } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatCurrency } from '../../../util/formatCurrency';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport PremiumProgress from '../../common/PremiumProgress';\nimport ActionMessage from '../../middle/ActionMessage';\nimport Button from '../../ui/Button';\nimport ListItem from '../../ui/ListItem';\nimport Switcher from '../../ui/Switcher';\nimport TextArea from '../../ui/TextArea';\n\nimport styles from './GiftComposer.module.scss';\n\nexport type OwnProps = {\n  gift: GiftOption;\n  userId: string;\n};\n\nexport type StateProps = {\n  captionLimit?: number;\n  patternColor?: string;\n  user?: ApiUser;\n  currentUserId?: string;\n  isPaymentFormLoading?: boolean;\n};\n\nconst LIMIT_DISPLAY_THRESHOLD = 50;\n\nfunction GiftComposer({\n  gift,\n  userId,\n  user,\n  captionLimit,\n  patternColor,\n  currentUserId,\n  isPaymentFormLoading,\n}: OwnProps & StateProps) {\n  const { sendStarGift, openInvoice } = getActions();\n\n  const lang = useLang();\n\n  const [giftMessage, setGiftMessage] = useState<string>('');\n  const [shouldHideName, setShouldHideName] = useState<boolean>(false);\n\n  const isStarGift = 'id' in gift;\n\n  const localMessage = useMemo(() => {\n    if (!isStarGift) {\n      return {\n        id: -1,\n        chatId: '0',\n        isOutgoing: true,\n        senderId: currentUserId,\n        date: Math.floor(Date.now() / 1000),\n        content: {\n          action: {\n            targetUserIds: [userId],\n            mediaType: 'action',\n            text: 'ActionGiftInbound',\n            type: 'giftPremium',\n            amount: gift.amount,\n            currency: gift.currency,\n            months: gift.months,\n            message: {\n              text: giftMessage,\n            },\n            translationValues: ['%action_origin%', '%gift_payment_amount%'],\n          },\n        },\n      } satisfies ApiMessage;\n    }\n\n    return {\n      id: -1,\n      chatId: currentUserId!,\n      isOutgoing: false,\n      senderId: currentUserId,\n      date: Math.floor(Date.now() / 1000),\n      content: {\n        action: {\n          targetUserIds: [userId],\n          mediaType: 'action',\n          text: 'ActionGiftInbound',\n          type: 'starGift',\n          currency: STARS_CURRENCY_CODE,\n          amount: gift.stars,\n          starGift: {\n            message: giftMessage?.length ? {\n              text: giftMessage,\n            } : undefined,\n            isNameHidden: shouldHideName,\n            starsToConvert: gift.starsToConvert,\n            isSaved: false,\n            isConverted: false,\n            gift,\n          },\n          translationValues: ['%action_origin%', '%gift_payment_amount%'],\n        },\n      },\n    } satisfies ApiMessage;\n  }, [currentUserId, gift, giftMessage, isStarGift, shouldHideName, userId]);\n\n  const handleGiftMessageChange = useLastCallback((e: ChangeEvent<HTMLTextAreaElement>) => {\n    setGiftMessage(e.target.value);\n  });\n\n  const handleShouldHideNameChange = useLastCallback(() => {\n    setShouldHideName(!shouldHideName);\n  });\n\n  const handleMainButtonClick = useLastCallback(() => {\n    if (isStarGift) {\n      sendStarGift({\n        userId,\n        shouldHideName,\n        gift,\n        message: giftMessage ? { text: giftMessage } : undefined,\n      });\n      return;\n    }\n\n    openInvoice({\n      type: 'giftcode',\n      userIds: [userId],\n      currency: gift.currency,\n      amount: gift.amount,\n      option: gift,\n      message: giftMessage ? { text: giftMessage } : undefined,\n    });\n  });\n\n  function renderOptionsSection() {\n    const symbolsLeft = captionLimit ? captionLimit - giftMessage.length : undefined;\n    return (\n      <div className={styles.optionsSection}>\n        <TextArea\n          className={styles.messageInput}\n          onChange={handleGiftMessageChange}\n          value={giftMessage}\n          label={lang('GiftMessagePlaceholder')}\n          maxLength={captionLimit}\n          maxLengthIndicator={symbolsLeft && symbolsLeft < LIMIT_DISPLAY_THRESHOLD ? symbolsLeft.toString() : undefined}\n        />\n\n        {isStarGift && (\n          <ListItem className={styles.switcher} narrow ripple onClick={handleShouldHideNameChange}>\n            <span>{lang('GiftHideMyName')}</span>\n            <Switcher\n              checked={shouldHideName}\n              onChange={handleShouldHideNameChange}\n              label={lang('GiftHideMyName')}\n            />\n          </ListItem>\n        )}\n      </div>\n    );\n  }\n\n  function renderFooter() {\n    const userFullName = getUserFullName(user)!;\n\n    const amount = isStarGift\n      ? formatStarsAsIcon(lang, gift.stars, true)\n      : formatCurrency(gift.amount, gift.currency);\n\n    return (\n      <div className={styles.footer}>\n        {isStarGift && (\n          <div className={styles.description}>\n            {lang('GiftHideNameDescription', { profile: userFullName, receiver: userFullName })}\n          </div>\n        )}\n\n        <div className={styles.spacer} />\n\n        {isStarGift && gift.availabilityRemains && (\n          <PremiumProgress\n            isPrimary\n            progress={gift.availabilityRemains / gift.availabilityTotal!}\n            rightText={lang('GiftSoldCount', {\n              count: gift.availabilityTotal! - gift.availabilityRemains,\n            })}\n            leftText={lang('GiftLeftCount', { count: gift.availabilityRemains })}\n            className={styles.limited}\n          />\n        )}\n        <Button\n          className={styles.mainButton}\n          onClick={handleMainButtonClick}\n          isLoading={isPaymentFormLoading}\n        >\n          {lang('GiftSend', {\n            amount,\n          }, {\n            withNodes: true,\n          })}\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName(styles.root, 'no-scroll')}>\n      <div\n        className={buildClassName(styles.actionMessageView, 'MessageList')}\n        // @ts-ignore -- FIXME: Find a way to disable interactions but keep a11y\n        inert\n        style={`--pattern-color: ${patternColor}`}\n      >\n        <ActionMessage key={isStarGift ? gift.id : gift.months} message={localMessage} />\n      </div>\n      {renderOptionsSection()}\n      {renderFooter()}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { userId }): StateProps => {\n    const theme = selectTheme(global);\n    const {\n      patternColor,\n    } = global.settings.themes[theme] || {};\n    const user = selectUser(global, userId);\n\n    const tabState = selectTabState(global);\n\n    return {\n      user,\n      patternColor,\n      captionLimit: global.appConfig?.starGiftMaxMessageLength,\n      currentUserId: global.currentUserId,\n      isPaymentFormLoading: tabState.isPaymentFormLoading,\n    };\n  },\n)(GiftComposer));\n","import React, { memo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumGiftCodeOption,\n  ApiSticker,\n} from '../../../api/types';\n\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForDuration,\n} from '../../../global/selectors';\nimport { formatCurrencyAsString } from '../../../util/formatCurrency';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  option: ApiPremiumGiftCodeOption;\n  baseMonthAmount?: number;\n  onClick: (gift: ApiPremiumGiftCodeOption) => void;\n};\n\nexport type StateProps = {\n  sticker?: ApiSticker;\n  canPlayAnimatedEmojis?: boolean;\n};\n\nconst GIFT_STICKER_SIZE = 86;\n\nfunction GiftItemPremium({\n  sticker, canPlayAnimatedEmojis, baseMonthAmount, option, onClick,\n}: OwnProps & StateProps) {\n  const {\n    months, amount, currency,\n  } = option;\n  const lang = useLang();\n\n  const handleGiftClick = useLastCallback(() => {\n    onClick(option);\n  });\n\n  const perMonth = Math.floor(amount / months);\n  const discount = baseMonthAmount && baseMonthAmount > perMonth\n    ? Math.ceil(100 - perMonth / (baseMonthAmount / 100))\n    : undefined;\n\n  function renderMonths() {\n    const caption = months === 12\n      ? lang('Years', { count: 1 }, { pluralValue: 1 })\n      : lang('Months', { count: months }, { pluralValue: months });\n    return (\n      <div className={styles.monthsDescription}>\n        {caption}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={styles.container}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        play={canPlayAnimatedEmojis}\n        noLoop\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n\n      {renderMonths()}\n      <div className={styles.description}>\n        {lang('PremiumGiftDescription')}\n      </div>\n      <Button className={styles.buy} nonInteractive size=\"tiny\" pill fluid>\n        {formatCurrencyAsString(amount, currency)}\n      </Button>\n      {Boolean(discount) && (\n        <GiftRibbon color=\"red\" text={lang('GiftDiscount', { percent: discount })} />\n      )}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { option }): StateProps => {\n    const sticker = selectGiftStickerForDuration(global, option.months);\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n\n    return {\n      sticker,\n      canPlayAnimatedEmojis,\n    };\n  },\n)(GiftItemPremium));\n","import React, { memo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiStarGift,\n  ApiSticker,\n} from '../../../api/types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\n\nimport AnimatedIconFromSticker from '../../common/AnimatedIconFromSticker';\nimport GiftRibbon from '../../common/gift/GiftRibbon';\nimport Icon from '../../common/icons/Icon';\nimport Button from '../../ui/Button';\n\nimport styles from './GiftItem.module.scss';\n\nexport type OwnProps = {\n  gift: ApiStarGift;\n  onClick: (gift: ApiStarGift) => void;\n};\n\nexport type StateProps = {\n  sticker?: ApiSticker;\n};\n\nconst GIFT_STICKER_SIZE = 90;\n\nfunction GiftItemStar({ sticker, gift, onClick }: OwnProps & StateProps) {\n  const { openGiftInfoModal } = getActions();\n  const lang = useLang();\n\n  const {\n    stars,\n    isLimited,\n    isSoldOut,\n  } = gift;\n\n  const handleGiftClick = useLastCallback(() => {\n    if (isSoldOut) {\n      openGiftInfoModal({ gift });\n      return;\n    }\n\n    onClick(gift);\n  });\n\n  if (!sticker) return undefined;\n\n  return (\n    <div\n      className={buildClassName(styles.container, styles.starGift)}\n      tabIndex={0}\n      role=\"button\"\n      onClick={handleGiftClick}\n    >\n      <AnimatedIconFromSticker\n        sticker={sticker}\n        noLoop\n        nonInteractive\n        size={GIFT_STICKER_SIZE}\n      />\n      <Button className={styles.buy} nonInteractive size=\"tiny\" color=\"stars\" withSparkleEffect pill fluid>\n        <Icon name=\"star\" className={styles.star} />\n        <div className={styles.amount}>\n          {stars}\n        </div>\n      </Button>\n      {isLimited && !isSoldOut && <GiftRibbon color=\"blue\" text={lang('GiftLimited')} />}\n      {isSoldOut && <GiftRibbon color=\"red\" text={lang('GiftSoldOut')} />}\n    </div>\n  );\n}\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { gift }): StateProps => {\n    const sticker = global.stickers.starGifts.stickers[gift.stickerId];\n\n    return {\n      sticker,\n    };\n  },\n)(GiftItemStar));\n","import type { FC } from '../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiPremiumGiftCodeOption,\n  ApiStarGift,\n  ApiStarsAmount,\n  ApiUser,\n} from '../../../api/types';\nimport type { StarGiftCategory, TabState } from '../../../global/types';\n\nimport { getUserFullName } from '../../../global/helpers';\nimport { selectUser } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useCurrentOrPrev from '../../../hooks/useCurrentOrPrev';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport GiftSendingOptions from './GiftComposer';\nimport GiftItemPremium from './GiftItemPremium';\nimport GiftItemStar from './GiftItemStar';\nimport StarGiftCategoryList from './StarGiftCategoryList';\n\nimport styles from './GiftModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['giftModal'];\n};\n\nexport type GiftOption = ApiPremiumGiftCodeOption | ApiStarGift;\n\ntype StateProps = {\n  boostPerSentGift?: number;\n  starGiftsById?: Record<string, ApiStarGift>;\n  starGiftCategoriesByName: Record<StarGiftCategory, string[]>;\n  starBalance?: ApiStarsAmount;\n  user?: ApiUser;\n};\n\nconst PremiumGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  starGiftsById,\n  starGiftCategoriesByName,\n  starBalance,\n  user,\n}) => {\n  const {\n    closeGiftModal, requestConfetti,\n  } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const dialogRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const transitionRef = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const giftHeaderRef = useRef<HTMLHeadingElement>(null);\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const [selectedGift, setSelectedGift] = useState<GiftOption | undefined>();\n  const [isHeaderHidden, setIsHeaderHidden] = useState(true);\n  const [isHeaderForStarGifts, setIsHeaderForStarGifts] = useState(false);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const filteredGifts = useMemo(() => {\n    return renderingModal?.gifts?.sort((prevGift, gift) => prevGift.months - gift.months)\n      .filter((gift) => gift.users === 1);\n  }, [renderingModal]);\n\n  const baseGift = useMemo(() => {\n    return filteredGifts?.reduce((prev, gift) => (prev.amount < gift.amount ? prev : gift));\n  }, [filteredGifts]);\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (renderingModal?.isCompleted) {\n      showConfetti();\n    }\n  }, [renderingModal]);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setIsHeaderHidden(true);\n      setSelectedGift(undefined);\n    }\n  }, [isOpen]);\n\n  const handleScroll = useLastCallback((e: React.UIEvent<HTMLDivElement>) => {\n    if (selectedGift) return;\n\n    const { scrollTop } = e.currentTarget;\n\n    setIsHeaderHidden(scrollTop <= 150);\n\n    if (transitionRef.current && giftHeaderRef.current) {\n      const { top: headerTop } = giftHeaderRef.current.getBoundingClientRect();\n      const { top: transitionTop } = transitionRef.current.getBoundingClientRect();\n      setIsHeaderForStarGifts(headerTop - transitionTop <= 0);\n    }\n  });\n\n  const giftPremiumDescription = lang('GiftPremiumDescription', {\n    user: getUserFullName(user)!,\n    link: (\n      <SafeLink\n        text={lang('GiftPremiumDescriptionLinkCaption')}\n        url={lang('GiftPremiumDescriptionLink')}\n      />\n    ),\n  }, { withNodes: true });\n\n  const starGiftDescription = lang('StarGiftDescription', {\n    user: getUserFullName(user)!,\n  }, { withNodes: true });\n\n  function renderGiftPremiumHeader() {\n    return (\n      <h2 className={buildClassName(styles.headerText, styles.center)}>\n        {lang('GiftPremiumHeader')}\n      </h2>\n    );\n  }\n\n  function renderGiftPremiumDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.center)}>\n        {giftPremiumDescription}\n      </p>\n    );\n  }\n\n  function renderStarGiftsHeader() {\n    return (\n      <h2 ref={giftHeaderRef} className={buildClassName(styles.headerText, styles.center)}>\n        {lang('StarsGiftHeader')}\n      </h2>\n    );\n  }\n\n  function renderStarGiftsDescription() {\n    return (\n      <p className={buildClassName(styles.description, styles.starGiftsDescription, styles.center)}>\n        {starGiftDescription}\n      </p>\n    );\n  }\n\n  const handleGiftClick = useLastCallback((gift: GiftOption) => {\n    setSelectedGift(gift);\n    setIsHeaderForStarGifts('id' in gift);\n    setIsHeaderHidden(false);\n  });\n\n  function renderStarGifts() {\n    return (\n      <div className={styles.starGiftsContainer}>\n        {starGiftsById && starGiftCategoriesByName[selectedCategory].map((giftId) => {\n          const gift = starGiftsById[giftId];\n          return (\n            <GiftItemStar\n              gift={gift}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  function renderPremiumGifts() {\n    return (\n      <div className={styles.premiumGiftsGallery}>\n        {filteredGifts?.map((gift) => {\n          return (\n            <GiftItemPremium\n              option={gift}\n              baseMonthAmount={baseGift ? Math.floor(baseGift.amount / baseGift.months) : undefined}\n              onClick={handleGiftClick}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n\n  const onCategoryChanged = useLastCallback((category: StarGiftCategory) => {\n    setSelectedCategory(category);\n  });\n\n  const handleCloseButtonClick = useLastCallback(() => {\n    if (selectedGift) {\n      setSelectedGift(undefined);\n      return;\n    }\n    closeGiftModal();\n  });\n\n  function renderMainScreen() {\n    return (\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <div className={styles.avatars}>\n          <Avatar\n            size=\"huge\"\n            peer={user}\n          />\n          <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n        </div>\n        {renderGiftPremiumHeader()}\n        {renderGiftPremiumDescription()}\n\n        {renderPremiumGifts()}\n\n        {renderStarGiftsHeader()}\n        {renderStarGiftsDescription()}\n        <StarGiftCategoryList onCategoryChanged={onCategoryChanged} />\n        <Transition\n          name=\"zoomFade\"\n          activeKey={getCategoryKey(selectedCategory)}\n          className={styles.starGiftsTransition}\n        >\n          {renderStarGifts()}\n        </Transition>\n      </div>\n    );\n  }\n\n  const isBackButton = Boolean(selectedGift);\n\n  const buttonClassName = buildClassName(\n    'animated-close-icon',\n    isBackButton && 'state-back',\n  );\n\n  return (\n    <Modal\n      dialogRef={dialogRef}\n      onClose={closeGiftModal}\n      isOpen={isOpen}\n      isSlim\n      contentClassName={styles.content}\n      className={buildClassName(styles.modalDialog, styles.root)}\n    >\n      <Button\n        className={styles.closeButton}\n        round\n        color=\"translucent\"\n        size=\"smaller\"\n        onClick={handleCloseButtonClick}\n        ariaLabel={isBackButton ? oldLang('Common.Back') : oldLang('Common.Close')}\n      >\n        <div className={buttonClassName} />\n      </Button>\n      <BalanceBlock className={styles.balance} balance={starBalance} />\n      <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n        <Transition\n          name=\"slideVerticalFade\"\n          activeKey={Number(isHeaderForStarGifts)}\n          slideClassName={styles.headerSlide}\n        >\n          <h2 className={styles.commonHeaderText}>\n            {lang(isHeaderForStarGifts ? 'StarsGiftHeader' : 'GiftPremiumHeader')}\n          </h2>\n        </Transition>\n      </div>\n      <Transition\n        ref={transitionRef}\n        className={styles.transition}\n        name=\"pushSlide\"\n        activeKey={selectedGift ? 1 : 0}\n      >\n        {!selectedGift && renderMainScreen()}\n        {selectedGift && renderingModal?.forUserId && (\n          <GiftSendingOptions gift={selectedGift} userId={renderingModal.forUserId} />\n        )}\n      </Transition>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const { starGiftsById, starGiftCategoriesByName, stars } = global;\n\n  const user = modal?.forUserId ? selectUser(global, modal.forUserId) : undefined;\n\n  return {\n    boostPerSentGift: global.appConfig?.boostsPerSentGift,\n    starGiftsById,\n    starGiftCategoriesByName,\n    starBalance: stars?.balance,\n    user,\n  };\n})(PremiumGiftModal));\n\nfunction getCategoryKey(category: StarGiftCategory) {\n  if (category === 'all') {\n    return -1;\n  }\n  if (category === 'limited') {\n    return 0;\n  }\n  return category;\n}\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { StarGiftCategory } from '../../../global/types';\n\nimport buildClassName from '../../../util/buildClassName';\n\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useLang from '../../../hooks/useLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarGiftCategoryList.module.scss';\n\ntype OwnProps = {\n  onCategoryChanged: (category: StarGiftCategory) => void;\n};\n\ntype StateProps = {\n  starGiftCategoriesByName: Record<StarGiftCategory, string[]>;\n};\n\nconst StarGiftCategoryList = ({\n  starGiftCategoriesByName,\n  onCategoryChanged,\n}: StateProps & OwnProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const lang = useLang();\n  const starCategories: number[] = useMemo(() => Object.keys(starGiftCategoriesByName)\n    .filter((category) => category !== 'all' && category !== 'limited')\n    .map(Number)\n    .sort((a, b) => a - b),\n  [starGiftCategoriesByName]);\n\n  const [selectedCategory, setSelectedCategory] = useState<StarGiftCategory>('all');\n\n  function handleItemClick(category: StarGiftCategory) {\n    setSelectedCategory(category);\n    onCategoryChanged(\n      category,\n    );\n  }\n\n  function renderCategoryName(category: StarGiftCategory) {\n    if (category === 'all') {\n      return lang('AllGiftsCategory');\n    }\n    if (category === 'limited') {\n      return lang('LimitedGiftsCategory');\n    }\n    return category;\n  }\n\n  function renderCategoryItem(category: StarGiftCategory) {\n    return (\n      <div\n        className={buildClassName(\n          styles.item,\n          selectedCategory === category && styles.selectedItem,\n        )}\n        onClick={() => handleItemClick(category)}\n      >\n        {category !== 'all' && category !== 'limited' && (\n          <StarIcon\n            className={styles.star}\n            type=\"gold\"\n            size=\"middle\"\n          />\n        )}\n        {renderCategoryName(category)}\n      </div>\n    );\n  }\n\n  useHorizontalScroll(ref, undefined, true);\n\n  return (\n    <div ref={ref} className={buildClassName(styles.list, 'no-scrollbar')}>\n      {renderCategoryItem('all')}\n      {renderCategoryItem('limited')}\n      {starCategories.map(renderCategoryItem)}\n    </div>\n  );\n};\n\nexport default memo(withGlobal(\n  (global): StateProps => {\n    const { starGiftCategoriesByName } = global;\n\n    return {\n      starGiftCategoriesByName,\n    };\n  },\n)(StarGiftCategoryList));\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiSticker, ApiUser } from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getUserFullName } from '../../../../global/helpers';\nimport { selectStarGiftSticker, selectUser } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { formatStarsAsIcon, formatStarsAsText } from '../../../../util/localization/format';\nimport { CUSTOM_PEER_HIDDEN } from '../../../../util/objects/customPeer';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { formatInteger } from '../../../../util/textFormat';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useFlag from '../../../../hooks/useFlag';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport BadgeButton from '../../../common/BadgeButton';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport Button from '../../../ui/Button';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport Link from '../../../ui/Link';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './GiftInfoModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['giftInfoModal'];\n};\n\ntype StateProps = {\n  sticker?: ApiSticker;\n  userFrom?: ApiUser;\n  targetUser?: ApiUser;\n  currentUserId?: string;\n  starGiftMaxConvertPeriod?: number;\n};\n\nconst STICKER_SIZE = 120;\n\nconst GiftInfoModal = ({\n  modal, sticker, userFrom, targetUser, currentUserId, starGiftMaxConvertPeriod,\n}: OwnProps & StateProps) => {\n  const {\n    closeGiftInfoModal,\n    changeGiftVisilibity,\n    convertGiftToStars,\n    openChatWithInfo,\n  } = getActions();\n\n  const [isConvertConfirmOpen, openConvertConfirm, closeConvertConfirm] = useFlag();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const isOpen = Boolean(modal);\n  const renderingModal = useCurrentOrPrev(modal);\n  const { gift: typeGift } = renderingModal || {};\n  const isUserGift = typeGift && 'gift' in typeGift;\n  const userGift = isUserGift ? typeGift : undefined;\n  const canUpdate = Boolean(userGift?.fromId && userGift.messageId);\n  const isSender = userGift?.fromId === currentUserId;\n  const canConvertDifference = (userGift && starGiftMaxConvertPeriod && (\n    userGift.date + starGiftMaxConvertPeriod - getServerTime()\n  )) || 0;\n  const conversionLeft = Math.ceil(canConvertDifference / 60 / 60 / 24);\n\n  const handleClose = useLastCallback(() => {\n    closeGiftInfoModal();\n  });\n\n  const handleTriggerVisibility = useLastCallback(() => {\n    const { fromId, messageId, isUnsaved } = userGift!;\n    changeGiftVisilibity({ userId: fromId!, messageId: messageId!, shouldUnsave: !isUnsaved });\n    handleClose();\n  });\n\n  const handleConvertToStars = useLastCallback(() => {\n    const { fromId, messageId } = userGift!;\n    convertGiftToStars({ userId: fromId!, messageId: messageId! });\n    closeConvertConfirm();\n    handleClose();\n  });\n\n  const handleOpenProfile = useLastCallback(() => {\n    openChatWithInfo({ id: currentUserId!, profileTab: 'gifts' });\n    handleClose();\n  });\n\n  const modalData = useMemo(() => {\n    if (!typeGift) {\n      return undefined;\n    }\n\n    const {\n      fromId, isNameHidden, message, starsToConvert, isUnsaved, isConverted,\n    } = userGift || {};\n    const gift = isUserGift ? typeGift.gift : typeGift;\n\n    const isVisibleForMe = isNameHidden && targetUser;\n\n    const description = (() => {\n      if (!userGift) {\n        return lang('GiftInfoSoldOutDescription');\n      }\n      if (!canUpdate && !isSender) return undefined;\n      if (!starsToConvert || canConvertDifference < 0) return undefined;\n      if (isConverted) {\n        return canUpdate\n          ? lang('GiftInfoDescriptionConverted', {\n            amount: formatInteger(starsToConvert!),\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          })\n          : lang('GiftInfoDescriptionOutConverted', {\n            amount: formatInteger(starsToConvert!),\n            user: getUserFullName(targetUser)!,\n          }, {\n            pluralValue: starsToConvert,\n            withNodes: true,\n            withMarkdown: true,\n          });\n      }\n\n      return canUpdate\n        ? lang('GiftInfoDescription', {\n          amount: starsToConvert,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert,\n        })\n        : lang('GiftInfoDescriptionOut', {\n          amount: starsToConvert,\n          user: getUserFullName(targetUser)!,\n        }, {\n          withNodes: true,\n          withMarkdown: true,\n          pluralValue: starsToConvert,\n        });\n    })();\n\n    const header = (\n      <div className={styles.header}>\n        <AnimatedIconFromSticker sticker={sticker} noLoop nonInteractive size={STICKER_SIZE} />\n        <h1 className={styles.title}>\n          {!userGift && lang('GiftInfoSoldOutTitle')}\n          {userGift && lang(canUpdate ? 'GiftInfoReceived' : 'GiftInfoTitle')}\n        </h1>\n        {userGift && (\n          <p className={styles.amount}>\n            <span className={styles.amount}>\n              {formatInteger(gift.stars)}\n            </span>\n            <StarIcon type=\"gold\" size=\"middle\" />\n          </p>\n        )}\n        {description && (\n          <p className={buildClassName(styles.description, !userGift && styles.soldOut)}>\n            {description}\n          </p>\n        )}\n      </div>\n    );\n\n    const tableData: TableData = [];\n    if (fromId || isNameHidden) {\n      tableData.push([\n        lang('GiftInfoFrom'),\n        fromId ? { chatId: fromId } : (\n          <>\n            <Avatar size=\"small\" peer={CUSTOM_PEER_HIDDEN} />\n            <span className={styles.unknown}>{oldLang(CUSTOM_PEER_HIDDEN.titleKey!)}</span>\n          </>\n        ),\n      ]);\n    }\n\n    if (userGift?.date) {\n      tableData.push([\n        lang('GiftInfoDate'),\n        formatDateTimeToString(userGift.date * 1000, lang.code, true),\n      ]);\n    }\n\n    if (gift.firstSaleDate) {\n      tableData.push([\n        lang('GiftInfoFirstSale'),\n        formatDateTimeToString(gift.firstSaleDate * 1000, lang.code, true),\n      ]);\n    }\n\n    if (gift.lastSaleDate) {\n      tableData.push([\n        lang('GiftInfoLastSale'),\n        formatDateTimeToString(gift.lastSaleDate * 1000, lang.code, true),\n      ]);\n    }\n\n    tableData.push([\n      lang('GiftInfoValue'),\n      <div className={styles.giftValue}>\n        {formatStarsAsIcon(lang, gift.stars)}\n        {canUpdate && canConvertDifference > 0 && Boolean(starsToConvert) && (\n          <BadgeButton onClick={openConvertConfirm}>\n            {lang('GiftInfoConvert', { amount: starsToConvert }, { pluralValue: starsToConvert })}\n          </BadgeButton>\n        )}\n      </div>,\n    ]);\n\n    if (gift.availabilityTotal) {\n      tableData.push([\n        lang('GiftInfoAvailability'),\n        lang('GiftInfoAvailabilityValue', {\n          count: gift.availabilityRemains || 0,\n          total: gift.availabilityTotal,\n        }, {\n          pluralValue: gift.availabilityRemains || 0,\n        }),\n      ]);\n    }\n\n    if (message) {\n      tableData.push([\n        undefined,\n        renderTextWithEntities(message),\n      ]);\n    }\n\n    const footer = (\n      <div className={styles.footer}>\n        {canUpdate && (\n          <div className={styles.footerDescription}>\n            <div>\n              {isUnsaved ? lang('GiftInfoHidden')\n                : lang('GiftInfoSaved', {\n                  link: <Link isPrimary onClick={handleOpenProfile}>{lang('GiftInfoSavedView')}</Link>,\n                }, {\n                  withNodes: true,\n                })}\n            </div>\n            {isVisibleForMe && (\n              <div>\n                {lang('GiftInfoSenderHidden')}\n              </div>\n            )}\n          </div>\n        )}\n        {!canUpdate && (\n          <Button size=\"smaller\" onClick={handleClose}>\n            {lang('OK')}\n          </Button>\n        )}\n        {canUpdate && (\n          <Button size=\"smaller\" onClick={handleTriggerVisibility}>\n            {lang(isUnsaved ? 'GiftInfoMakeVisible' : 'GiftInfoMakeInvisible')}\n          </Button>\n        )}\n      </div>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [typeGift, userGift, isUserGift, targetUser, sticker, lang, canUpdate, canConvertDifference, isSender, oldLang]);\n\n  return (\n    <>\n      <TableInfoModal\n        isOpen={isOpen}\n        header={modalData?.header}\n        tableData={modalData?.tableData}\n        footer={modalData?.footer}\n        onClose={handleClose}\n      />\n      {userGift && (\n        <ConfirmDialog\n          isOpen={isConvertConfirmOpen}\n          onClose={closeConvertConfirm}\n          confirmHandler={handleConvertToStars}\n          title={lang('GiftInfoConvertTitle')}\n        >\n          <div>\n            {lang('GiftInfoConvertDescription1', {\n              amount: formatStarsAsText(lang, userGift.starsToConvert!),\n              user: getUserFullName(userFrom)!,\n            }, {\n              withNodes: true,\n              withMarkdown: true,\n            })}\n          </div>\n          {canConvertDifference > 0 && (\n            <div>\n              {lang('GiftInfoConvertDescriptionPeriod', {\n                count: conversionLeft,\n              }, {\n                withNodes: true,\n                withMarkdown: true,\n                pluralValue: conversionLeft,\n              })}\n            </div>\n          )}\n          <div>{lang('GiftInfoConvertDescription2')}</div>\n        </ConfirmDialog>\n      )}\n    </>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const typeGift = modal?.gift;\n    const isUserGift = typeGift && 'gift' in typeGift;\n    const gift = isUserGift ? typeGift.gift : typeGift;\n    const stickerId = gift?.stickerId;\n    const sticker = stickerId ? selectStarGiftSticker(global, stickerId) : undefined;\n\n    const fromId = isUserGift && typeGift.fromId;\n    const userFrom = fromId ? selectUser(global, fromId) : undefined;\n    const targetUser = modal?.userId ? selectUser(global, modal.userId) : undefined;\n\n    return {\n      sticker,\n      userFrom,\n      targetUser,\n      currentUserId: global.currentUserId,\n      starGiftMaxConvertPeriod: global.appConfig?.starGiftMaxConvertPeriod,\n    };\n  },\n)(GiftInfoModal));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useMemo, useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport {\n  filterUsersByName, isUserBot,\n} from '../../../../global/helpers';\nimport { unique } from '../../../../util/iteratees';\nimport sortChatIds from '../../../common/helpers/sortChatIds';\n\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport PeerPicker from '../../../common/pickers/PeerPicker';\nimport PickerModal from '../../../common/pickers/PickerModal';\n\nimport styles from './GiftRecipientPicker.module.scss';\n\nexport type OwnProps = {\n  modal?: boolean;\n};\n\ninterface StateProps {\n  currentUserId?: string;\n  userSelectionLimit?: number;\n  userIds?: string[];\n}\n\nconst GiftRecipientPicker: FC<OwnProps & StateProps> = ({\n  modal,\n  currentUserId,\n  userIds,\n}) => {\n  const { closeGiftRecipientPicker, openGiftModal } = getActions();\n\n  const oldLang = useOldLang();\n  const isOpen = modal;\n\n  const [searchQuery, setSearchQuery] = useState<string>('');\n\n  const displayedUserIds = useMemo(() => {\n    const usersById = getGlobal().users.byId;\n    const filteredContactIds = userIds ? filterUsersByName(userIds, usersById, searchQuery) : [];\n\n    return sortChatIds(unique(filteredContactIds).filter((userId) => {\n      const user = usersById[userId];\n      if (!user) {\n        return true;\n      }\n\n      return !isUserBot(user) && userId !== currentUserId;\n    }));\n  }, [currentUserId, searchQuery, userIds]);\n\n  const handleSelectedUserIdsChange = useLastCallback((selectedId: string) => {\n    openGiftModal({ forUserId: selectedId });\n    closeGiftRecipientPicker();\n  });\n\n  return (\n    <PickerModal\n      className={styles.root}\n      isOpen={isOpen}\n      onClose={closeGiftRecipientPicker}\n      title={oldLang('GiftTelegramPremiumOrStarsTitle')}\n      hasCloseButton\n      shouldAdaptToSearch\n      withFixedHeight\n    >\n      <PeerPicker\n        className={styles.picker}\n        itemIds={displayedUserIds}\n        filterValue={searchQuery}\n        filterPlaceholder={oldLang('Search')}\n        onSelectedIdChange={handleSelectedUserIdsChange}\n        onFilterChange={setSearchQuery}\n        isSearchable\n        withDefaultPadding\n        withStatus\n      />\n    </PickerModal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global): StateProps => {\n  const { currentUserId } = global;\n\n  return {\n    currentUserId,\n    userIds: global.contactList?.userIds,\n    userSelectionLimit: global.appConfig?.giveawayAddPeersMax,\n  };\n})(GiftRecipientPicker));\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMessage, ApiStarsAmount, ApiUser,\n} from '../../../api/types';\nimport type { TabState } from '../../../global/types';\nimport type { CustomPeer } from '../../../types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../config';\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport { selectChat, selectChatMessage, selectUser } from '../../../global/selectors';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport PeerBadge from '../../common/PeerBadge';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Checkbox from '../../ui/Checkbox';\nimport Modal from '../../ui/Modal';\nimport Separator from '../../ui/Separator';\nimport BalanceBlock from '../stars/BalanceBlock';\nimport StarSlider from './StarSlider';\n\nimport styles from './PaidReactionModal.module.scss';\n\nexport type OwnProps = {\n  modal: TabState['paidReactionModal'];\n};\n\ntype StateProps = {\n  message?: ApiMessage;\n  chat?: ApiChat;\n  maxAmount: number;\n  starBalance?: ApiStarsAmount;\n  defaultPrivacy?: boolean;\n};\n\ntype ReactorData = {\n  amount: number;\n  localAmount: number;\n  isMe?: boolean;\n  isAnonymous?: boolean;\n  user?: ApiUser;\n};\n\nconst MAX_TOP_REACTORS = 3;\nconst DEFAULT_STARS_AMOUNT = 50;\nconst MAX_REACTION_AMOUNT = 2500;\nconst ANONYMOUS_PEER: CustomPeer = {\n  avatarIcon: 'author-hidden',\n  customPeerAvatarColor: '#9eaab5',\n  isCustomPeer: true,\n  titleKey: 'StarsReactionAnonymous',\n};\n\nconst PaidReactionModal = ({\n  modal,\n  chat,\n  message,\n  maxAmount,\n  starBalance,\n  defaultPrivacy,\n}: OwnProps & StateProps) => {\n  const { closePaidReactionModal, addLocalPaidReaction } = getActions();\n\n  const [starsAmount, setStarsAmount] = useState(DEFAULT_STARS_AMOUNT);\n  const [isTouched, markTouched, unmarkTouched] = useFlag();\n  const [shouldShowUp, setShouldShowUp] = useState(true);\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const handleAnonimityChange = useLastCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setShouldShowUp(e.target.checked);\n  });\n\n  const handleAmountChange = useLastCallback((value: number) => {\n    setStarsAmount(value);\n    markTouched();\n  });\n\n  useEffect(() => {\n    if (!modal) {\n      unmarkTouched();\n    }\n  }, [modal]);\n\n  useEffect(() => {\n    const currentReactor = message?.reactions?.topReactors?.find((reactor) => reactor.isMe);\n    if (currentReactor) {\n      setShouldShowUp(!currentReactor.isAnonymous);\n      return;\n    }\n\n    setShouldShowUp(defaultPrivacy || true);\n  }, [defaultPrivacy, message?.reactions?.topReactors]);\n\n  const handleSend = useLastCallback(() => {\n    if (!modal) return;\n\n    addLocalPaidReaction({\n      chatId: modal.chatId,\n      messageId: modal.messageId,\n      count: starsAmount,\n      isPrivate: !shouldShowUp,\n    });\n    closePaidReactionModal();\n  });\n\n  const topReactors = useMemo(() => {\n    const global = getGlobal();\n    const all = message?.reactions?.topReactors;\n    if (!all) {\n      return undefined;\n    }\n\n    const result: ReactorData[] = [];\n    let hasMe = false;\n\n    all.forEach((reactor) => {\n      const user = reactor.peerId ? selectUser(global, reactor.peerId) : undefined;\n      if (!user && !reactor.isAnonymous && !reactor.isMe) return;\n\n      if (reactor.isMe) {\n        hasMe = true;\n      }\n\n      result.push({\n        amount: reactor.count,\n        localAmount: reactor.isMe && isTouched ? starsAmount : 0,\n        isMe: reactor.isMe,\n        isAnonymous: reactor.isAnonymous,\n        user,\n      });\n    });\n\n    if (!hasMe && isTouched) {\n      const me = selectUser(global, global.currentUserId!);\n      result.push({\n        amount: 0,\n        localAmount: starsAmount,\n        isMe: true,\n        user: me,\n      });\n    }\n\n    result.sort((a, b) => (b.amount + b.localAmount) - (a.amount + a.localAmount));\n\n    return result.slice(0, MAX_TOP_REACTORS);\n  }, [isTouched, message?.reactions?.topReactors, starsAmount]);\n\n  const chatTitle = chat && getChatTitle(oldLang, chat);\n\n  return (\n    <Modal\n      isOpen={Boolean(modal)}\n      onClose={closePaidReactionModal}\n      isSlim\n      hasAbsoluteCloseButton\n      contentClassName={styles.content}\n    >\n      <BalanceBlock balance={starBalance} className={styles.modalBalance} />\n      <StarSlider\n        className={styles.slider}\n        defaultValue={DEFAULT_STARS_AMOUNT}\n        maxValue={maxAmount}\n        onChange={handleAmountChange}\n      />\n      <h3 className={styles.title}>{oldLang('StarsReactionTitle')}</h3>\n      <div className={styles.description}>\n        {renderText(oldLang('StarsReactionText', chatTitle), ['simple_markdown', 'emoji'])}\n      </div>\n      <Separator>\n        {topReactors && <div className={styles.topLabel}>{oldLang('StarsReactionTopSenders')}</div>}\n      </Separator>\n      {topReactors && (\n        <div className={styles.top}>\n          {topReactors.map((reactor) => {\n            const countText = formatInteger(reactor.amount + reactor.localAmount);\n            const peer = (reactor.isAnonymous || !reactor.user || (reactor.isMe && !shouldShowUp))\n              ? ANONYMOUS_PEER : reactor.user;\n            const text = 'isCustomPeer' in peer ? oldLang(peer.titleKey) : getUserFullName(peer);\n            return (\n              <PeerBadge\n                className={styles.topPeer}\n                key={`${reactor.user?.id || 'anonymous'}-${countText}`}\n                peer={peer}\n                badgeText={countText}\n                badgeIcon=\"star\"\n                badgeClassName={styles.topBadge}\n                text={text}\n              />\n            );\n          })}\n        </div>\n      )}\n      <Checkbox\n        className={styles.checkbox}\n        checked={shouldShowUp}\n        onChange={handleAnonimityChange}\n        label={oldLang('StarsReactionShowMeInTopSenders')}\n      />\n      <Button\n        size=\"smaller\"\n        onClick={handleSend}\n      >\n        {lang('SendPaidReaction', { amount: starsAmount }, {\n          withNodes: true,\n          specialReplacement: {\n            [STARS_ICON_PLACEHOLDER]: <Icon className={styles.buttonStar} name=\"star\" />,\n          },\n        })}\n      </Button>\n      <p className={styles.disclaimer}>\n        {lang('StarsReactionTerms', {\n          link: <SafeLink text={lang('StarsReactionLinkText')} url={lang('StarsReactionLink')} />,\n        }, {\n          withNodes: true,\n        })}\n      </p>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const chat = modal && selectChat(global, modal.chatId);\n    const message = modal && selectChatMessage(global, modal.chatId, modal.messageId);\n    const starBalance = global.stars?.balance;\n    const maxAmount = global.appConfig?.paidReactionMaxAmount || MAX_REACTION_AMOUNT;\n    const defaultPrivacy = global.settings.paidReactionPrivacy;\n\n    return {\n      chat,\n      message,\n      starBalance,\n      maxAmount,\n      defaultPrivacy,\n    };\n  },\n)(PaidReactionModal));\n","import React, {\n  memo, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\n\nimport { requestMeasure, requestMutation } from '../../../lib/fasterdom/fasterdom';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatInteger } from '../../../util/textFormat';\n\nimport useEffectOnce from '../../../hooks/useEffectOnce';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useResizeObserver from '../../../hooks/useResizeObserver';\n\nimport AnimatedCounter from '../../common/AnimatedCounter';\nimport Icon from '../../common/icons/Icon';\nimport Sparkles from '../../common/Sparkles';\n\nimport styles from './StarSlider.module.scss';\n\ntype OwnProps = {\n  maxValue: number;\n  defaultValue: number;\n  className?: string;\n  onChange: (value: number) => void;\n};\n\nconst DEFAULT_POINTS = [50, 100, 500, 1000, 2000, 5000, 10000];\n\nconst StarSlider = ({\n  maxValue,\n  defaultValue,\n  className,\n  onChange,\n}: OwnProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const floatingBadgeRef = useRef<HTMLDivElement>(null);\n\n  const points = useMemo(() => {\n    const result = [];\n    for (let i = 0; i < DEFAULT_POINTS.length; i++) {\n      if (DEFAULT_POINTS[i] < maxValue) {\n        result.push(DEFAULT_POINTS[i]);\n      }\n\n      if (DEFAULT_POINTS[i] >= maxValue) {\n        result.push(maxValue);\n        break;\n      }\n    }\n\n    return result;\n  }, [maxValue]);\n\n  const [value, setValue] = useState(0);\n\n  useEffectOnce(() => {\n    setValue(getProgress(points, defaultValue));\n  });\n\n  const updateSafeBadgePosition = useLastCallback(() => {\n    const badge = floatingBadgeRef.current;\n    if (!badge) return;\n    const parent = badge.parentElement!;\n\n    requestMeasure(() => {\n      const safeMinX = parent.offsetLeft + badge.offsetWidth / 2;\n      const safeMaxX = parent.offsetLeft + parent.offsetWidth - badge.offsetWidth / 2;\n\n      requestMutation(() => {\n        parent.style.setProperty('--_min-x', `${safeMinX}px`);\n        parent.style.setProperty('--_max-x', `${safeMaxX}px`);\n      });\n    });\n  });\n\n  useResizeObserver(floatingBadgeRef, updateSafeBadgePosition);\n\n  const handleChange = useLastCallback((event: React.ChangeEvent<HTMLInputElement>) => {\n    const newValue = Number(event.currentTarget.value);\n    setValue(newValue);\n\n    onChange(getValue(points, newValue));\n  });\n\n  return (\n    <div className={buildClassName(styles.root, className)} style={`--progress: ${value / points.length}`}>\n      <div className={styles.floatingBadgeWrapper}>\n        <div className={styles.floatingBadge} ref={floatingBadgeRef}>\n          <div className={styles.floatingBadgeText}>\n            <Icon name=\"star\" className={styles.floatingBadgeIcon} />\n            <AnimatedCounter text={formatInteger(getValue(points, value))} />\n          </div>\n          <svg className={styles.floatingBadgeTriangle} width=\"28\" height=\"28\" viewBox=\"0 0 28 28\" fill=\"none\">\n            <defs>\n              <linearGradient id=\"StarBadgeTriangle\" x1=\"0\" x2=\"1\" y1=\"0\" y2=\"0\">\n                <stop offset=\"-50%\" stop-color=\"#FFAA00\" />\n                <stop offset=\"150%\" stop-color=\"#FFCD3A\" />\n              </linearGradient>\n            </defs>\n            <path d=\"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z\" fill=\"url(#StarBadgeTriangle)\" />\n          </svg>\n        </div>\n      </div>\n      <div className={styles.progress} />\n      <Sparkles preset=\"progress\" className={styles.sparkles} />\n      <input\n        className={styles.slider}\n        type=\"range\"\n        min={0}\n        max={points.length}\n        defaultValue={getProgress(points, defaultValue)}\n        step=\"any\"\n        onChange={handleChange}\n      />\n    </div>\n  );\n};\n\nfunction getProgress(points: number[], value: number) {\n  const pointIndex = points.findIndex((point) => value <= point);\n  const prevPoint = points[pointIndex - 1] || 1;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const progress = (value - prevPoint) / (nextPoint - prevPoint);\n  return pointIndex + progress;\n}\n\nfunction getValue(points: number[], progress: number) {\n  const pointIndex = Math.floor(progress);\n  const prevPoint = points[pointIndex - 1] || 1;\n  const nextPoint = points[pointIndex] || points[points.length - 1];\n  const value = prevPoint + (nextPoint - prevPoint) * (progress - pointIndex);\n  return Math.round(value);\n}\n\nexport default memo(StarSlider);\n","import React, { memo } from '../../../lib/teact/teact';\n\nimport type { ApiStarsAmount } from '../../../api/types';\n\nimport { formatStarsAmount } from '../../../global/helpers/payments';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useLang from '../../../hooks/useLang';\n\nimport StarIcon from '../../common/icons/StarIcon';\n\nimport styles from './StarsBalanceModal.module.scss';\n\ntype OwnProps = {\n  balance?: ApiStarsAmount;\n  className?: string;\n};\n\nconst BalanceBlock = ({ balance, className }: OwnProps) => {\n  const lang = useLang();\n\n  return (\n    <div className={buildClassName(styles.balance, className)}>\n      <span className={styles.smallerText}>{lang('StarsBalance')}</span>\n      <div className={styles.balanceBottom}>\n        <StarIcon type=\"gold\" size=\"middle\" />\n        {balance !== undefined ? formatStarsAmount(lang, balance) : ''}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(BalanceBlock);\n","import React, {\n  memo, useEffect, useMemo, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiStarTopupOption } from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getChatTitle, getUserFullName } from '../../../global/helpers';\nimport { selectChat, selectIsPremiumPurchaseBlocked, selectUser } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Icon from '../../common/icons/Icon';\nimport StarIcon from '../../common/icons/StarIcon';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport InfiniteScroll from '../../ui/InfiniteScroll';\nimport Modal from '../../ui/Modal';\nimport TabList, { type TabWithProperties } from '../../ui/TabList';\nimport Transition from '../../ui/Transition';\nimport BalanceBlock from './BalanceBlock';\nimport StarTopupOptionList from './StarTopupOptionList';\nimport StarsSubscriptionItem from './subscription/StarsSubscriptionItem';\nimport StarsTransactionItem from './transaction/StarsTransactionItem';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarLogo from '../../../assets/icons/StarLogo.svg';\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nconst TRANSACTION_TYPES = ['all', 'inbound', 'outbound'] as const;\nconst TRANSACTION_TABS: TabWithProperties[] = [\n  { title: 'StarsTransactionsAll' },\n  { title: 'StarsTransactionsIncoming' },\n  { title: 'StarsTransactionsOutgoing' },\n];\nconst TRANSACTION_ITEM_CLASS = 'StarsTransactionItem';\nconst SUBSCRIPTION_PURPOSE = 'subs';\n\nexport type OwnProps = {\n  modal: TabState['starsBalanceModal'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  canBuyPremium?: boolean;\n};\n\nconst StarsBalanceModal = ({\n  modal, starsBalanceState, canBuyPremium,\n}: OwnProps & StateProps) => {\n  const {\n    closeStarsBalanceModal, loadStarsTransactions, loadStarsSubscriptions, openStarsGiftingPickerModal, openInvoice,\n  } = getActions();\n\n  const { balance, history, subscriptions } = starsBalanceState || {};\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n  const [selectedTabIndex, setSelectedTabIndex] = useState(0);\n  const [areBuyOptionsShown, showBuyOptions, hideBuyOptions] = useFlag();\n\n  const isOpen = Boolean(modal && starsBalanceState);\n\n  const {\n    originStarsPayment, originReaction, originGift, topup,\n  } = modal || {};\n\n  const shouldOpenOnBuy = originStarsPayment || originReaction || originGift || topup;\n\n  const ongoingTransactionAmount = originStarsPayment?.form?.invoice?.totalAmount\n    || originStarsPayment?.subscriptionInfo?.subscriptionPricing?.amount\n    || originReaction?.amount\n    || originGift?.gift.stars\n    || topup?.balanceNeeded;\n  const starsNeeded = ongoingTransactionAmount ? ongoingTransactionAmount - (balance?.amount || 0) : undefined;\n  const starsNeededText = useMemo(() => {\n    const global = getGlobal();\n\n    if (originReaction) {\n      const channel = selectChat(global, originReaction.chatId);\n      if (!channel) return undefined;\n      return oldLang('StarsNeededTextReactions', getChatTitle(oldLang, channel));\n    }\n\n    if (originStarsPayment) {\n      const bot = originStarsPayment.form?.botId ? selectUser(global, originStarsPayment.form.botId) : undefined;\n      if (!bot) return undefined;\n      return oldLang('StarsNeededText', getUserFullName(bot));\n    }\n\n    if (originGift) {\n      const user = selectUser(global, originGift.userId);\n      if (!user) return undefined;\n      return oldLang('StarsNeededTextGift', getUserFullName(user));\n    }\n\n    if (topup?.purpose === SUBSCRIPTION_PURPOSE) {\n      return oldLang('StarsNeededTextLink');\n    }\n\n    return undefined;\n  }, [originReaction, originStarsPayment, originGift, topup?.purpose, oldLang]);\n\n  const shouldShowItems = Boolean(history?.all?.transactions.length && !shouldOpenOnBuy);\n  const shouldSuggestGifting = !shouldOpenOnBuy;\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n      setSelectedTabIndex(0);\n      hideBuyOptions();\n    }\n  }, [isOpen]);\n\n  useEffect(() => {\n    if (shouldOpenOnBuy) {\n      showBuyOptions();\n      return;\n    }\n\n    hideBuyOptions();\n  }, [shouldOpenOnBuy]);\n\n  const tosText = useMemo(() => {\n    if (!isOpen) return undefined;\n\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />,\n      parts[1],\n    ];\n  }, [isOpen, oldLang]);\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleLoadMoreTransactions = useLastCallback(() => {\n    loadStarsTransactions({\n      type: TRANSACTION_TYPES[selectedTabIndex],\n    });\n  });\n\n  const handleLoadMoreSubscriptions = useLastCallback(() => {\n    loadStarsSubscriptions();\n  });\n\n  const openStarsGiftingPickerModalHandler = useLastCallback(() => {\n    openStarsGiftingPickerModal({});\n  });\n\n  const handleBuyStars = useLastCallback((option: ApiStarTopupOption) => {\n    openInvoice({\n      type: 'stars',\n      stars: option.stars,\n      currency: option.currency,\n      amount: option.amount,\n    });\n  });\n\n  return (\n    <Modal className={styles.root} isOpen={isOpen} onClose={closeStarsBalanceModal}>\n      <div className={buildClassName(styles.main, 'custom-scroll')} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => closeStarsBalanceModal()}\n          ariaLabel={lang('Close')}\n        >\n          <Icon name=\"close\" />\n        </Button>\n        <BalanceBlock balance={balance} className={styles.modalBalance} />\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {oldLang('TelegramStars')}\n          </h2>\n        </div>\n        <div className={styles.section}>\n          <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n          <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n          <h2 className={styles.headerText}>\n            {starsNeeded ? oldLang('StarsNeededTitle', ongoingTransactionAmount) : oldLang('TelegramStars')}\n          </h2>\n          <div className={styles.description}>\n            {renderText(\n              starsNeededText || oldLang('TelegramStarsInfo'),\n              ['simple_markdown', 'emoji'],\n            )}\n          </div>\n          {canBuyPremium && !areBuyOptionsShown && (\n            <Button\n              className={styles.starButton}\n              onClick={showBuyOptions}\n            >\n              {oldLang('Star.List.BuyMoreStars')}\n            </Button>\n          )}\n          {canBuyPremium && !areBuyOptionsShown && shouldSuggestGifting && (\n            <Button\n              className={buildClassName(styles.starButton, 'settings-main-menu-star')}\n              color=\"translucent\"\n              onClick={openStarsGiftingPickerModalHandler}\n            >\n              <StarIcon className=\"icon\" type=\"gold\" size=\"big\" />\n              {oldLang('TelegramStarsGift')}\n            </Button>\n          )}\n          {areBuyOptionsShown && starsBalanceState?.topupOptions && (\n            <StarTopupOptionList\n              starsNeeded={starsNeeded}\n              options={starsBalanceState.topupOptions}\n              onClick={handleBuyStars}\n            />\n          )}\n        </div>\n        {areBuyOptionsShown && (\n          <div className={styles.tos}>\n            {tosText}\n          </div>\n        )}\n        {shouldShowItems && Boolean(subscriptions?.list.length) && (\n          <div className={styles.section}>\n            <h3 className={styles.sectionTitle}>{oldLang('StarMySubscriptions')}</h3>\n            <div className={styles.subscriptions}>\n              {subscriptions?.list.map((subscription) => (\n                <StarsSubscriptionItem\n                  key={subscription.id}\n                  subscription={subscription}\n                />\n              ))}\n              {subscriptions?.nextOffset && (\n                <Button\n                  isText\n                  disabled={subscriptions.isLoading}\n                  size=\"smaller\"\n                  noForcedUpperCase\n                  className={styles.loadMore}\n                  onClick={handleLoadMoreSubscriptions}\n                >\n                  <Icon name=\"down\" className={styles.loadMoreIcon} />\n                  {oldLang('StarMySubscriptionsExpand')}\n                </Button>\n              )}\n            </div>\n          </div>\n        )}\n        {shouldShowItems && (\n          <div className={styles.container}>\n            <div className={styles.section}>\n              <Transition\n                name={lang.isRtl ? 'slideOptimizedRtl' : 'slideOptimized'}\n                activeKey={selectedTabIndex}\n                renderCount={TRANSACTION_TABS.length}\n                shouldRestoreHeight\n                className={styles.transition}\n              >\n                <InfiniteScroll\n                  onLoadMore={handleLoadMoreTransactions}\n                  items={history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions}\n                  scrollContainerClosest={`.${styles.main}`}\n                  itemSelector={`.${TRANSACTION_ITEM_CLASS}`}\n                  className={styles.transactions}\n                  noFastList\n                >\n                  {history?.[TRANSACTION_TYPES[selectedTabIndex]]?.transactions.map((transaction) => (\n                    <StarsTransactionItem\n                      key={`${transaction.id}-${transaction.isRefund}`}\n                      transaction={transaction}\n                      className={TRANSACTION_ITEM_CLASS}\n                    />\n                  ))}\n                </InfiniteScroll>\n              </Transition>\n            </div>\n            <TabList\n              className={styles.tabs}\n              tabClassName={styles.tab}\n              activeTab={selectedTabIndex}\n              tabs={TRANSACTION_TABS}\n              onSwitchTab={setSelectedTabIndex}\n            />\n          </div>\n        )}\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    return {\n      starsBalanceState: global.stars,\n      canBuyPremium: !selectIsPremiumPurchaseBlocked(global),\n    };\n  },\n)(StarsBalanceModal));\n","import React, { memo, useEffect, useMemo } from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type {\n  ApiChat, ApiMediaExtendedPreview, ApiMessage, ApiUser,\n} from '../../../api/types';\nimport type { GlobalState, TabState } from '../../../global/types';\n\nimport { getChatTitle, getCustomPeerFromInvite, getUserFullName } from '../../../global/helpers';\nimport {\n  selectChat, selectChatMessage, selectUser,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { formatStarsAsIcon } from '../../../util/localization/format';\nimport { formatInteger } from '../../../util/textFormat';\nimport renderText from '../../common/helpers/renderText';\n\nimport useFlag from '../../../hooks/useFlag';\nimport useLang from '../../../hooks/useLang';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\nimport usePrevious from '../../../hooks/usePrevious';\n\nimport Avatar from '../../common/Avatar';\nimport StarIcon from '../../common/icons/StarIcon';\nimport PeerBadge from '../../common/PeerBadge';\nimport PickerSelectedItem from '../../common/pickers/PickerSelectedItem';\nimport SafeLink from '../../common/SafeLink';\nimport Button from '../../ui/Button';\nimport Modal from '../../ui/Modal';\nimport BalanceBlock from './BalanceBlock';\nimport PaidMediaThumb from './transaction/PaidMediaThumb';\n\nimport styles from './StarsBalanceModal.module.scss';\n\nimport StarsBackground from '../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsPayment'];\n};\n\ntype StateProps = {\n  starsBalanceState?: GlobalState['stars'];\n  bot?: ApiUser;\n  paidMediaMessage?: ApiMessage;\n  paidMediaChat?: ApiChat;\n};\n\nconst StarPaymentModal = ({\n  modal,\n  bot,\n  starsBalanceState,\n  paidMediaMessage,\n  paidMediaChat,\n}: OwnProps & StateProps) => {\n  const { closeStarsPaymentModal, openStarsBalanceModal, sendStarPaymentForm } = getActions();\n  const [isLoading, markLoading, unmarkLoading] = useFlag();\n  const isOpen = Boolean(modal?.inputInvoice && starsBalanceState);\n\n  const prevModal = usePrevious(modal);\n  const renderingModal = modal || prevModal;\n\n  const { form, subscriptionInfo } = renderingModal || {};\n  const amount = form?.invoice?.totalAmount || subscriptionInfo?.subscriptionPricing?.amount;\n  const isBotSubscription = Boolean(form?.invoice.subscriptionPeriod);\n  const canShowPeerItem = !subscriptionInfo?.subscriptionPricing;\n\n  const photo = form?.photo;\n\n  const oldLang = useOldLang();\n  const lang = useLang();\n\n  useEffect(() => {\n    if (!isOpen) {\n      unmarkLoading();\n    }\n  }, [isOpen]);\n\n  const descriptionText = useMemo(() => {\n    if (!renderingModal?.inputInvoice) {\n      return '';\n    }\n\n    const botName = getUserFullName(bot);\n    const starsText = oldLang('Stars.Intro.PurchasedText.Stars', amount);\n\n    if (paidMediaMessage) {\n      const extendedMedia = paidMediaMessage.content.paidMedia!.extendedMedia as ApiMediaExtendedPreview[];\n      const areAllPhotos = extendedMedia.every((media) => !media.duration);\n      const areAllVideos = extendedMedia.every((media) => !!media.duration);\n\n      const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', extendedMedia.length)\n        : areAllVideos ? oldLang('Stars.Transfer.Videos', extendedMedia.length)\n          : oldLang('Media', extendedMedia.length);\n\n      const channelTitle = getChatTitle(oldLang, paidMediaChat!);\n      return oldLang('Stars.Transfer.UnlockInfo', [mediaText, channelTitle, starsText]);\n    }\n\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeText', {\n        chat: subscriptionInfo.title,\n        amount,\n      }, {\n        withNodes: true,\n        withMarkdown: true,\n        pluralValue: amount!,\n      });\n    }\n\n    if (isBotSubscription) {\n      return lang('StarsSubscribeBotText', {\n        name: form.title,\n        amount,\n        bot: botName,\n      }, {\n        pluralValue: amount!,\n      });\n    }\n\n    return oldLang('Stars.Transfer.Info', [form!.title, botName, starsText]);\n  }, [\n    renderingModal?.inputInvoice, bot, oldLang, amount, paidMediaMessage, subscriptionInfo, isBotSubscription, form,\n    paidMediaChat, lang,\n  ]);\n\n  const disclaimerText = useMemo(() => {\n    if (subscriptionInfo) {\n      return lang('StarsSubscribeInfo', {\n        link: <SafeLink url={lang('StarsSubscribeInfoLink')} text={lang('StarsSubscribeInfoLinkText')} />,\n      }, {\n        withNodes: true,\n      });\n    }\n\n    return undefined;\n  }, [subscriptionInfo, lang]);\n\n  const inviteCustomPeer = useMemo(() => {\n    if (!subscriptionInfo) {\n      return undefined;\n    }\n\n    return getCustomPeerFromInvite(subscriptionInfo);\n  }, [subscriptionInfo]);\n\n  const handlePayment = useLastCallback(() => {\n    const balance = starsBalanceState?.balance;\n    if (amount === undefined || balance === undefined) {\n      return;\n    }\n\n    if (amount > balance.amount) {\n      openStarsBalanceModal({\n        originStarsPayment: modal,\n      });\n      return;\n    }\n\n    sendStarPaymentForm({});\n    markLoading();\n  });\n\n  return (\n    <Modal\n      contentClassName={styles.paymentContent}\n      isOpen={isOpen}\n      hasAbsoluteCloseButton\n      isSlim\n      onClose={closeStarsPaymentModal}\n    >\n      <BalanceBlock balance={starsBalanceState?.balance} className={styles.modalBalance} />\n      <div className={styles.paymentImages} dir={oldLang.isRtl ? 'ltr' : 'rtl'}>\n        {paidMediaMessage ? (\n          <PaidMediaThumb media={paidMediaMessage.content.paidMedia!.extendedMedia} />\n        ) : inviteCustomPeer ? (\n          <>\n            <Avatar className={styles.paymentPhoto} peer={inviteCustomPeer} size=\"giant\" />\n            <StarIcon type=\"gold\" size=\"adaptive\" className={styles.avatarStar} />\n          </>\n        ) : (\n          <PeerBadge\n            peer={!photo ? bot : undefined}\n            avatarWebPhoto={photo}\n            avatarSize=\"giant\"\n            badgeIcon=\"star\"\n            badgeText={formatInteger(amount!)}\n            badgeClassName={styles.amountBadge}\n            className={styles.paymentPhoto}\n          />\n        )}\n        <img className={styles.paymentImageBackground} src={StarsBackground} alt=\"\" draggable={false} />\n      </div>\n      <h2 className={styles.headerText}>\n        {inviteCustomPeer ? oldLang('StarsSubscribeTitle') : oldLang('StarsConfirmPurchaseTitle')}\n      </h2>\n      {canShowPeerItem && <PickerSelectedItem className={styles.botItem} peerId={form?.botId} />}\n      <div className={styles.description}>\n        {renderText(descriptionText, ['simple_markdown', 'emoji'])}\n      </div>\n      <Button className={styles.paymentButton} size=\"smaller\" onClick={handlePayment} isLoading={isLoading}>\n        {lang(isBotSubscription ? 'StarsSubscribeBotButtonMonth' : 'StarsPay', {\n          amount: formatStarsAsIcon(lang, amount!, true),\n        }, {\n          withNodes: true,\n        })}\n      </Button>\n      {disclaimerText && (\n        <div className={buildClassName(styles.disclaimer, styles.smallerText)}>\n          {disclaimerText}\n        </div>\n      )}\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const bot = modal?.form?.botId ? selectUser(global, modal.form.botId) : undefined;\n\n    const messageInputInvoice = modal?.inputInvoice?.type === 'message' ? modal.inputInvoice : undefined;\n    const message = messageInputInvoice\n      ? selectChatMessage(global, messageInputInvoice.chatId, messageInputInvoice.messageId) : undefined;\n    const chat = messageInputInvoice ? selectChat(global, messageInputInvoice.chatId) : undefined;\n    const isPaidMedia = message?.content.paidMedia;\n\n    return {\n      bot,\n      starsBalanceState: global.stars,\n      paidMediaMessage: isPaidMedia ? message : undefined,\n      paidMediaChat: isPaidMedia ? chat : undefined,\n    };\n  },\n)(StarPaymentModal));\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, {\n  memo, useEffect, useMemo, useRef,\n  useState,\n} from '../../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../../global';\n\nimport type {\n  ApiStarTopupOption, ApiUser,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { getSenderTitle } from '../../../../global/helpers';\nimport {\n  selectUser,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatCurrencyAsString } from '../../../../util/formatCurrency';\nimport renderText from '../../../common/helpers/renderText';\n\nimport useCurrentOrPrev from '../../../../hooks/useCurrentOrPrev';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport Modal from '../../../ui/Modal';\nimport StarTopupOptionList from '../StarTopupOptionList';\n\nimport styles from './StarsGiftModal.module.scss';\n\nimport StarLogo from '../../../../assets/icons/StarLogo.svg';\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsGiftModal'];\n};\n\ntype StateProps = {\n  user?: ApiUser;\n};\n\nconst StarsGiftModal: FC<OwnProps & StateProps> = ({\n  modal,\n  user,\n}) => {\n  const {\n    closeStarsGiftModal, openInvoice, requestConfetti,\n  } = getActions();\n  // eslint-disable-next-line no-null/no-null\n  const dialogRef = useRef<HTMLDivElement>(null);\n\n  const isOpen = Boolean(modal?.isOpen);\n\n  const renderingModal = useCurrentOrPrev(modal);\n\n  const oldLang = useOldLang();\n\n  const [selectedOption, setSelectedOption] = useState<ApiStarTopupOption | undefined>();\n  const [isHeaderHidden, setHeaderHidden] = useState(true);\n\n  useEffect(() => {\n    if (!isOpen) {\n      setHeaderHidden(true);\n    }\n  }, [isOpen]);\n\n  const showConfetti = useLastCallback(() => {\n    const dialog = dialogRef.current;\n    if (!dialog) return;\n    if (isOpen) {\n      const {\n        top, left, width, height,\n      } = dialog.querySelector('.modal-content')!.getBoundingClientRect();\n      requestConfetti({\n        top,\n        left,\n        width,\n        height,\n        withStars: true,\n      });\n    }\n  });\n\n  useEffect(() => {\n    if (renderingModal?.isCompleted) {\n      showConfetti();\n    }\n  }, [renderingModal, showConfetti]);\n\n  const handleClick = useLastCallback((option: ApiStarTopupOption) => {\n    if (!renderingModal) return;\n\n    setSelectedOption(option);\n    if (user) {\n      openInvoice({\n        type: 'starsgift',\n        userId: user.id,\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    } else {\n      openInvoice({\n        type: 'stars',\n        stars: option.stars,\n        currency: option.currency,\n        amount: option.amount,\n      });\n    }\n  });\n\n  function handleScroll(e: React.UIEvent<HTMLDivElement>) {\n    const { scrollTop } = e.currentTarget;\n\n    setHeaderHidden(scrollTop <= 150);\n  }\n\n  const handleClose = useLastCallback(() => {\n    closeStarsGiftModal();\n  });\n\n  function renderGiftTitle() {\n    if (renderingModal?.isCompleted) {\n      return user ? renderText(oldLang('Notification.StarsGift.SentYou',\n        formatCurrencyAsString(selectedOption!.amount, selectedOption!.currency, oldLang.code)), ['simple_markdown'])\n        : renderText(oldLang('StarsAcquiredInfo', selectedOption?.stars), ['simple_markdown']);\n    }\n\n    return user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars');\n  }\n\n  const bottomText = useMemo(() => {\n    const text = oldLang('lng_credits_summary_options_about');\n    const parts = text.split('{link}');\n    return [\n      parts[0],\n      <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />,\n      parts[1],\n    ];\n  }, [oldLang]);\n\n  return (\n    <Modal\n      className={buildClassName(styles.modalDialog, styles.root)}\n      dialogRef={dialogRef}\n      isSlim\n      onClose={handleClose}\n      isOpen={isOpen}\n    >\n      <div className={styles.main} onScroll={handleScroll}>\n        <Button\n          round\n          size=\"smaller\"\n          className={styles.closeButton}\n          color=\"translucent\"\n          // eslint-disable-next-line react/jsx-no-bind\n          onClick={() => closeStarsGiftModal()}\n          ariaLabel={oldLang('Close')}\n        >\n          <i className=\"icon icon-close\" />\n        </Button>\n        <div className={buildClassName(styles.header, isHeaderHidden && styles.hiddenHeader)}>\n          <h2 className={styles.starHeaderText}>\n            {user ? oldLang('GiftStarsTitle') : oldLang('Star.List.GetStars')}\n          </h2>\n        </div>\n        <div className={styles.headerInfo}>\n          {user ? (\n            <>\n              <Avatar\n                size=\"huge\"\n                peer={user}\n                className={styles.avatar}\n              />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          ) : (\n            <>\n              <img className={styles.logo} src={StarLogo} alt=\"\" draggable={false} />\n              <img className={styles.logoBackground} src={StarsBackground} alt=\"\" draggable={false} />\n            </>\n          )}\n        </div>\n        <h2 className={buildClassName(styles.headerText, styles.center)}>\n          {renderGiftTitle()}\n        </h2>\n        <p className={styles.description}>\n          {user ? renderText(\n            oldLang('ActionGiftStarsSubtitle', getSenderTitle(oldLang, user)), ['simple_markdown'],\n          ) : oldLang('Stars.Purchase.GetStarsInfo')}\n        </p>\n        <div className={styles.section}>\n          <StarTopupOptionList\n            options={renderingModal?.starsGiftOptions}\n            onClick={handleClick}\n          />\n          <div className={styles.secondaryInfo}>\n            {bottomText}\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>((global, { modal }): StateProps => {\n  const user = modal?.forUserId ? selectUser(getGlobal(), modal.forUserId) : undefined;\n\n  return {\n    user,\n  };\n})(StarsGiftModal));\n","import type { ApiStarsAmount, ApiStarsTransaction } from '../../../../api/types';\nimport type { OldLangFn } from '../../../../hooks/useOldLang';\n\nimport { buildStarsTransactionCustomPeer } from '../../../../global/helpers/payments';\nimport { formatPercent } from '../../../../util/textFormat';\n\nexport function getTransactionTitle(lang: OldLangFn, transaction: ApiStarsTransaction) {\n  if (transaction.starRefCommision) {\n    return lang('StarTransactionCommission', formatPercent(transaction.starRefCommision));\n  }\n  if (transaction.extendedMedia) return lang('StarMediaPurchase');\n  if (transaction.subscriptionPeriod) return transaction.title || lang('StarSubscriptionPurchase');\n  if (transaction.isReaction) return lang('StarsReactionsSent');\n  if (transaction.giveawayPostId) return lang('StarsGiveawayPrizeReceived');\n  if (transaction.isMyGift) return lang('StarsGiftSent');\n  if (transaction.isGift) return lang('StarsGiftReceived');\n  if (transaction.starGift) {\n    return isNegativeStarsAmount(transaction.stars) ? lang('Gift2TransactionSent') : lang('Gift2ConvertedTitle');\n  }\n\n  const customPeer = (transaction.peer && transaction.peer.type !== 'peer'\n    && buildStarsTransactionCustomPeer(transaction.peer)) || undefined;\n\n  if (customPeer) return customPeer.title || lang(customPeer.titleKey!);\n\n  return transaction.title;\n}\n\nexport function isNegativeStarsAmount(starsAmount: ApiStarsAmount) {\n  if (starsAmount.amount) return starsAmount.amount < 0;\n  return starsAmount.nanos < 0;\n}\n","import React, { memo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiStarsSubscription,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\n\nimport { getSenderTitle } from '../../../../global/helpers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { formatDateToString } from '../../../../util/dates/dateFormat';\nimport { formatInteger } from '../../../../util/textFormat';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\n\nimport styles from './StarsSubscriptionItem.module.scss';\n\ntype OwnProps = {\n  subscription: ApiStarsSubscription;\n};\n\nfunction selectProvidedPeer(peerId: string) {\n  return (global: GlobalState) => (\n    selectPeer(global, peerId)\n  );\n}\n\nconst StarsSubscriptionItem = ({ subscription }: OwnProps) => {\n  const { openStarsSubscriptionModal } = getActions();\n  const {\n    peerId, pricing, until, isCancelled, title, photo,\n  } = subscription;\n  const lang = useOldLang();\n\n  const peer = useSelector(selectProvidedPeer(peerId))!;\n\n  const handleClick = useLastCallback(() => {\n    openStarsSubscriptionModal({ subscription });\n  });\n\n  if (!peer) {\n    return undefined;\n  }\n  const hasExpired = until < Date.now() / 1000;\n  const formattedDate = formatDateToString(until * 1000, lang.code, true, 'long');\n\n  return (\n    <div className={styles.root} onClick={handleClick}>\n      <div className={styles.preview}>\n        <Avatar size=\"medium\" peer={peer} />\n        <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{getSenderTitle(lang, peer)}</h3>\n        {title && (\n          <p className={styles.subtitle}>\n            {photo && <Avatar webPhoto={photo} size=\"micro\" />}\n            {title}\n          </p>\n        )}\n        <p className={styles.description}>\n          {lang(\n            hasExpired ? 'StarsSubscriptionExpired'\n              : isCancelled ? 'StarsSubscriptionExpires' : 'StarsSubscriptionRenews',\n            formattedDate,\n          )}\n        </p>\n      </div>\n      <div className={styles.status}>\n        {(isCancelled || hasExpired) ? (\n          <div className={styles.statusEnded}>\n            {lang(hasExpired ? 'StarsSubscriptionStatusExpired' : 'StarsSubscriptionStatusCancelled')}\n          </div>\n        ) : (\n          <>\n            <div className={styles.statusPricing}>\n              <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n              <span className={styles.amount}>\n                {formatInteger(pricing.amount)}\n              </span>\n            </div>\n            <div className={styles.statusPeriod}>{lang('StarsParticipantSubscriptionPerMonth')}</div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsSubscriptionItem);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../../../config';\nimport { isApiPeerUser } from '../../../../global/helpers/peers';\nimport {\n  selectPeer,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport SafeLink from '../../../common/SafeLink';\nimport Button from '../../../ui/Button';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\n\nimport styles from './StarsSubscriptionModal.module.scss';\n\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsSubscriptionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n};\n\nconst StarsSubscriptionModal: FC<OwnProps & StateProps> = ({\n  modal, peer,\n}) => {\n  const {\n    closeStarsSubscriptionModal,\n    fulfillStarsSubscription,\n    changeStarsSubscription,\n    checkChatInvite,\n    loadStarStatus,\n    openInvoice,\n  } = getActions();\n  const oldLang = useOldLang();\n  const lang = useLang();\n  const { subscription } = modal || {};\n\n  const buttonState = useMemo(() => {\n    if (!subscription) {\n      return 'hidden';\n    }\n\n    if (subscription.canRefulfill) {\n      return 'refulfill';\n    }\n\n    const isActive = subscription.until > Date.now() / 1000;\n    if (isActive && !subscription.isCancelled) {\n      return 'cancel';\n    }\n\n    if (isActive && subscription.isCancelled) {\n      return 'renew';\n    }\n\n    const canRestart = subscription.chatInviteHash || subscription.invoiceSlug;\n    if (!isActive && canRestart) {\n      return 'restart';\n    }\n\n    return 'ok';\n  }, [subscription]);\n\n  const handleButtonClick = useLastCallback(() => {\n    if (!subscription) {\n      return;\n    }\n\n    switch (buttonState) {\n      case 'refulfill': {\n        fulfillStarsSubscription({ id: subscription.id });\n        break;\n      }\n      case 'restart': {\n        if (subscription.chatInviteHash) {\n          checkChatInvite({ hash: subscription.chatInviteHash });\n        } else if (subscription.invoiceSlug) {\n          openInvoice({\n            type: 'slug',\n            slug: subscription.invoiceSlug,\n          });\n        }\n        loadStarStatus();\n        break;\n      }\n      case 'renew': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: false });\n        break;\n      }\n      case 'cancel': {\n        changeStarsSubscription({ id: subscription.id, isCancelled: true });\n        break;\n      }\n    }\n    closeStarsSubscriptionModal();\n  });\n\n  const starModalData = useMemo(() => {\n    if (!subscription || !peer) {\n      return undefined;\n    }\n\n    const {\n      pricing, until, isCancelled, canRefulfill, photo, title, hasBotCancelled,\n    } = subscription;\n\n    const isBotSubscription = isApiPeerUser(peer);\n\n    const header = (\n      <div className={buildClassName(styles.header, styles.starsHeader)}>\n        <div className={styles.avatarWrapper}>\n          <Avatar peer={!photo ? peer : undefined} webPhoto={photo} size=\"jumbo\" />\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"adaptive\" />\n        </div>\n        <img\n          className={buildClassName(styles.starsBackground)}\n          src={StarsBackground}\n          alt=\"\"\n          draggable={false}\n        />\n        <h1 className={styles.title}>{title || oldLang('StarsSubscriptionTitle')}</h1>\n        <p className={styles.amount}>\n          {lang('StarsPerMonth', {\n            amount: pricing.amount,\n          }, {\n            withNodes: true,\n            specialReplacement: {\n              [STARS_ICON_PLACEHOLDER]: <StarIcon className={styles.amountStar} size=\"adaptive\" type=\"gold\" />,\n            },\n          })}\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    tableData.push([\n      oldLang(isBotSubscription ? 'StarsSubscriptionBot' : 'StarsSubscriptionChannel'),\n      { chatId: peer.id },\n    ]);\n\n    if (title) {\n      tableData.push([\n        oldLang('StarsSubscriptionBotProduct'),\n        title,\n      ]);\n    }\n\n    const hasExpired = until < Date.now() / 1000;\n    tableData.push([\n      oldLang(hasExpired ? 'StarsSubscriptionUntilExpired'\n        : isCancelled ? 'StarsSubscriptionUntilExpires' : 'StarsSubscriptionUntilRenews'),\n      formatDateTimeToString(until * 1000, oldLang.code, true),\n    ]);\n\n    const footerTos = lang('StarsTransactionTOS', {\n      link: <SafeLink url={lang('StarsTransactionTOSLink')} text={lang('StarsTransactionTOSLinkText')} />,\n    }, {\n      withNodes: true,\n    });\n\n    const footer = (\n      <span className={styles.footer}>\n        <p className={styles.secondary}>{footerTos}</p>\n        {isCancelled && (\n          <p className={styles.danger}>\n            {oldLang(hasBotCancelled ? 'StarsSubscriptionBotCancelledText' : 'StarsSubscriptionCancelledText')}\n          </p>\n        )}\n        {canRefulfill && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionRefulfillInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionExpiredInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {!isCancelled && !canRefulfill && !hasExpired && (\n          <p className={styles.secondary}>\n            {oldLang('StarsSubscriptionCancelInfo', formatDateTimeToString(until * 1000, oldLang.code, true))}\n          </p>\n        )}\n        {buttonState !== 'hidden' && (\n          <Button\n            size=\"smaller\"\n            color={buttonState === 'cancel' ? 'danger' : 'primary'}\n            isText={buttonState === 'cancel'}\n            onClick={handleButtonClick}\n          >\n            {oldLang(\n              buttonState === 'cancel' ? 'StarsSubscriptionCancel'\n                : buttonState === 'refulfill' ? 'StarsSubscriptionRefulfill'\n                  : buttonState === 'restart' ? 'StarsSubscriptionAgain'\n                    : buttonState === 'renew' ? 'StarsSubscriptionRenew' : 'OK',\n            )}\n          </Button>\n        )}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [buttonState, lang, oldLang, peer, subscription]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(subscription)}\n      className={styles.modal}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      onClose={closeStarsSubscriptionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const peerId = modal?.subscription.peerId;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    return {\n      peer,\n    };\n  },\n)(StarsSubscriptionModal));\n","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiMediaExtendedPreview, BoughtPaidMedia } from '../../../../api/types';\n\nimport { getMediaHash, getMediaThumbUri } from '../../../../global/helpers';\nimport buildClassName from '../../../../util/buildClassName';\n\nimport useMedia from '../../../../hooks/useMedia';\n\nimport Icon from '../../../common/icons/Icon';\nimport MediaSpoiler from '../../../common/MediaSpoiler';\n\nimport styles from './PaidMediaThumb.module.scss';\n\ntype OwnProps = {\n  className?: string;\n  media: ApiMediaExtendedPreview[] | BoughtPaidMedia[];\n  isTransactionPreview?: boolean;\n  onClick?: NoneToVoidFunction;\n};\n\nconst THUMB_LIMIT = 3;\nconst PREVIEW_THUMB_LIMIT = 2;\n\nconst PaidMediaThumb = ({\n  media, className, isTransactionPreview, onClick,\n}: OwnProps) => {\n  const count = Math.min(media.length, isTransactionPreview ? PREVIEW_THUMB_LIMIT : THUMB_LIMIT);\n  const isLocked = 'mediaType' in media[0];\n  return (\n    <div\n      className={buildClassName(\n        styles.root,\n        styles[`itemCount${count}`],\n        isTransactionPreview && styles.preview,\n        className,\n      )}\n      dir=\"rtl\"\n      onClick={onClick}\n    >\n      {media.slice(0, count).reverse().map((item, i, arr) => {\n        const realIndex = arr.length - i - 1;\n        return 'mediaType' in item ? (\n          <MediaSpoiler\n            className={styles.thumb}\n            isVisible\n            width={item.width}\n            height={item.height}\n            thumbDataUri={item.thumbnail?.dataUri}\n          />\n        ) : (\n          <SingleMediaThumb\n            className={buildClassName(isTransactionPreview && realIndex > 0 && styles.noOutline)}\n            boughtMedia={item}\n            index={realIndex}\n          />\n        );\n      })}\n      {isLocked && (\n        <div className={styles.count}>\n          <Icon name=\"stars-lock\" />\n          {media.length > 1 ? media.length : ''}\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction SingleMediaThumb({\n  boughtMedia,\n  index,\n  className,\n}: {\n  boughtMedia: BoughtPaidMedia;\n  index?: number;\n  className?: string;\n}) {\n  const media = (boughtMedia.video || boughtMedia.photo)!;\n  const mediaHash = getMediaHash(media, 'pictogram');\n  const thumb = getMediaThumbUri(media);\n\n  const mediaBlob = useMedia(mediaHash);\n\n  return (\n    <div className={buildClassName(styles.thumb, index !== undefined && `stars-transaction-media-${index}`, className)}>\n      {thumb && <img className={styles.blurry} src={thumb} alt=\"\" />}\n      {mediaBlob && <img className={styles.full} src={mediaBlob} alt=\"\" />}\n    </div>\n  );\n}\n\nexport default memo(PaidMediaThumb);\n","import React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransaction,\n} from '../../../../api/types';\nimport type { GlobalState } from '../../../../global/types';\nimport type { CustomPeer } from '../../../../types';\n\nimport { getSenderTitle } from '../../../../global/helpers';\nimport { buildStarsTransactionCustomPeer, formatStarsTransactionAmount } from '../../../../global/helpers/payments';\nimport { selectPeer } from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { CUSTOM_PEER_PREMIUM } from '../../../../util/objects/customPeer';\nimport renderText from '../../../common/helpers/renderText';\nimport { getTransactionTitle, isNegativeStarsAmount } from '../helpers/transaction';\n\nimport useSelector from '../../../../hooks/data/useSelector';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\n\nimport Avatar from '../../../common/Avatar';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionItem.module.scss';\n\ntype OwnProps = {\n  transaction: ApiStarsTransaction;\n  className?: string;\n};\n\nfunction selectOptionalPeer(peerId?: string) {\n  return (global: GlobalState) => (\n    peerId ? selectPeer(global, peerId) : undefined\n  );\n}\n\nconst StarsTransactionItem = ({ transaction, className }: OwnProps) => {\n  const { openStarsTransactionModal } = getActions();\n  const {\n    date,\n    stars,\n    photo,\n    peer: transactionPeer,\n    extendedMedia,\n    subscriptionPeriod,\n  } = transaction;\n  const lang = useLang();\n  const oldLang = useOldLang();\n\n  const peerId = transactionPeer.type === 'peer' ? transactionPeer.id : undefined;\n  const peer = useSelector(selectOptionalPeer(peerId));\n\n  const data = useMemo(() => {\n    let title = getTransactionTitle(oldLang, transaction);\n    let description;\n    let status: string | undefined;\n    let avatarPeer: ApiPeer | CustomPeer | undefined;\n\n    if (transaction.peer.type === 'peer') {\n      description = peer && getSenderTitle(oldLang, peer);\n      avatarPeer = peer || CUSTOM_PEER_PREMIUM;\n    } else {\n      const customPeer = buildStarsTransactionCustomPeer(transaction.peer);\n      title = customPeer.title || oldLang(customPeer.titleKey!);\n      description = oldLang(customPeer.subtitleKey!);\n      avatarPeer = customPeer;\n    }\n\n    if (transaction.photo) {\n      avatarPeer = undefined;\n    }\n\n    if (transaction.isRefund) {\n      status = oldLang('StarsRefunded');\n    }\n\n    if (transaction.hasFailed) {\n      status = oldLang('StarsFailed');\n    }\n\n    if (transaction.isPending) {\n      status = oldLang('StarsPending');\n    }\n\n    return {\n      title,\n      description,\n      avatarPeer,\n      status,\n    };\n  }, [oldLang, peer, transaction]);\n\n  const handleClick = useLastCallback(() => {\n    openStarsTransactionModal({ transaction });\n  });\n\n  return (\n    <div className={buildClassName(styles.root, className)} onClick={handleClick}>\n      <div className={styles.preview}>\n        {extendedMedia ? <PaidMediaThumb media={extendedMedia} isTransactionPreview />\n          : <Avatar size=\"medium\" webPhoto={photo} peer={data.avatarPeer} />}\n        {Boolean(subscriptionPeriod) && (\n          <StarIcon className={styles.subscriptionStar} type=\"gold\" size=\"small\" />\n        )}\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>{data.title}</h3>\n        {data.description && (\n          <p className={styles.description}>{renderText(data.description)}</p>\n        )}\n        <p className={styles.date}>\n          {formatDateTimeToString(date * 1000, oldLang.code, true)}\n          {data.status && `  (${data.status})`}\n        </p>\n      </div>\n      <div className={styles.stars}>\n        <span\n          className={buildClassName(styles.amount, isNegativeStarsAmount(stars) ? styles.negative : styles.positive)}\n        >\n          {formatStarsTransactionAmount(lang, stars)}\n        </span>\n        <StarIcon className={styles.star} type=\"gold\" size=\"adaptive\" />\n      </div>\n    </div>\n  );\n};\n\nexport default memo(StarsTransactionItem);\n","import type { FC } from '../../../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type {\n  ApiPeer,\n  ApiStarsTransactionPeer, ApiSticker,\n} from '../../../../api/types';\nimport type { TabState } from '../../../../global/types';\nimport { MediaViewerOrigin } from '../../../../types';\n\nimport { getMessageLink } from '../../../../global/helpers';\nimport { buildStarsTransactionCustomPeer, formatStarsTransactionAmount } from '../../../../global/helpers/payments';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForStars,\n  selectPeer, selectStarGiftSticker,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { copyTextToClipboard } from '../../../../util/clipboard';\nimport { formatDateTimeToString } from '../../../../util/dates/dateFormat';\nimport { getTransactionTitle, isNegativeStarsAmount } from '../helpers/transaction';\n\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useOldLang from '../../../../hooks/useOldLang';\nimport usePrevious from '../../../../hooks/usePrevious';\n\nimport AnimatedIconFromSticker from '../../../common/AnimatedIconFromSticker';\nimport Avatar from '../../../common/Avatar';\nimport Icon from '../../../common/icons/Icon';\nimport StarIcon from '../../../common/icons/StarIcon';\nimport SafeLink from '../../../common/SafeLink';\nimport TableInfoModal, { type TableData } from '../../common/TableInfoModal';\nimport PaidMediaThumb from './PaidMediaThumb';\n\nimport styles from './StarsTransactionModal.module.scss';\n\nimport StarsBackground from '../../../../assets/stars-bg.png';\n\nexport type OwnProps = {\n  modal: TabState['starsTransactionModal'];\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n  canPlayAnimatedEmojis?: boolean;\n  topSticker?: ApiSticker;\n};\n\nconst StarsTransactionModal: FC<OwnProps & StateProps> = ({\n  modal, peer, canPlayAnimatedEmojis, topSticker,\n}) => {\n  const { showNotification, openMediaViewer, closeStarsTransactionModal } = getActions();\n\n  const lang = useLang();\n  const oldLang = useOldLang();\n  const { transaction } = modal || {};\n\n  const handleOpenMedia = useLastCallback(() => {\n    const media = transaction?.extendedMedia;\n    if (!media) return;\n\n    openMediaViewer({\n      origin: MediaViewerOrigin.StarsTransaction,\n      standaloneMedia: media.flatMap((item) => Object.values(item)),\n    });\n  });\n\n  const starModalData = useMemo(() => {\n    if (!transaction) {\n      return undefined;\n    }\n\n    const {\n      giveawayPostId, photo, stars,\n    } = transaction;\n\n    const customPeer = (transaction.peer && transaction.peer.type !== 'peer'\n        && buildStarsTransactionCustomPeer(transaction.peer)) || undefined;\n\n    const peerId = transaction.peer?.type === 'peer' ? transaction.peer.id : undefined;\n    const toName = transaction.peer && oldLang(getStarsPeerTitleKey(transaction.peer));\n\n    const title = getTransactionTitle(oldLang, transaction);\n\n    const messageLink = peer && transaction.messageId\n      ? getMessageLink(peer, undefined, transaction.messageId) : undefined;\n    const giveawayMessageLink = peer && giveawayPostId && getMessageLink(peer, undefined, giveawayPostId);\n\n    const media = transaction.extendedMedia;\n\n    const mediaAmount = media?.length || 0;\n    const areAllPhotos = media?.every((m) => !m.video);\n    const areAllVideos = media?.every((m) => !m.photo);\n\n    const mediaText = areAllPhotos ? oldLang('Stars.Transfer.Photos', mediaAmount)\n      : areAllVideos ? oldLang('Stars.Transfer.Videos', mediaAmount)\n        : oldLang('Media', mediaAmount);\n\n    const description = transaction.description || (media ? mediaText : undefined);\n\n    const shouldDisplayAvatar = !media && !topSticker;\n    const avatarPeer = !photo ? (peer || customPeer) : undefined;\n\n    const header = (\n      <div className={buildClassName(styles.header, styles.starsHeader)}>\n        {media && (\n          <PaidMediaThumb\n            className={buildClassName(styles.mediaPreview, 'transaction-media-preview')}\n            media={media}\n            onClick={handleOpenMedia}\n          />\n        )}\n        {!media && topSticker && (\n          <AnimatedIconFromSticker\n            key={transaction.id}\n            sticker={topSticker}\n            play={canPlayAnimatedEmojis}\n            noLoop\n            nonInteractive\n          />\n        )}\n        {shouldDisplayAvatar && (\n          <Avatar peer={avatarPeer} webPhoto={photo} size=\"giant\" />\n        )}\n        <img\n          className={buildClassName(styles.starsBackground)}\n          src={StarsBackground}\n          alt=\"\"\n          draggable={false}\n        />\n        {title && <h1 className={styles.title}>{title}</h1>}\n        <p className={styles.description}>{description}</p>\n        <p className={styles.amount}>\n          <span\n            className={buildClassName(styles.amount, isNegativeStarsAmount(stars) ? styles.negative : styles.positive)}\n          >\n            {formatStarsTransactionAmount(lang, stars)}\n          </span>\n          <StarIcon type=\"gold\" size=\"middle\" />\n        </p>\n      </div>\n    );\n\n    const tableData: TableData = [];\n\n    if (transaction.starRefCommision) {\n      tableData.push([\n        oldLang('StarsTransaction.StarRefReason.Title'),\n        oldLang('StarsTransaction.StarRefReason.Program'),\n      ]);\n    }\n\n    let peerLabel;\n    if (isNegativeStarsAmount(stars) || transaction.isMyGift) {\n      peerLabel = oldLang('Stars.Transaction.To');\n    } else if (transaction.starRefCommision) {\n      peerLabel = oldLang('StarsTransaction.StarRefReason.Miniapp');\n    } else if (peerId) {\n      peerLabel = oldLang('Star.Transaction.From');\n    } else {\n      peerLabel = oldLang('Stars.Transaction.Via');\n    }\n\n    tableData.push([\n      peerLabel,\n      peerId ? { chatId: peerId } : toName || '',\n    ]);\n\n    if (messageLink) {\n      tableData.push([oldLang('Stars.Transaction.Reaction.Post'), <SafeLink url={messageLink} text={messageLink} />]);\n    }\n\n    if (giveawayMessageLink) {\n      tableData.push([oldLang('BoostReason'), <SafeLink url={giveawayMessageLink} text={oldLang('Giveaway')} />]);\n      tableData.push([oldLang('Gift'), oldLang('Stars', transaction.stars, 'i')]);\n    }\n\n    if (transaction.id) {\n      tableData.push([\n        oldLang('Stars.Transaction.Id'),\n        (\n          <>\n            <div\n              className={styles.tid}\n              onClick={() => {\n                copyTextToClipboard(transaction.id!);\n                showNotification({\n                  message: oldLang('StarsTransactionIDCopied'),\n                });\n              }}\n            >\n              {transaction.id}\n            </div>\n            <Icon className={styles.copyIcon} name=\"copy\" />\n          </>\n        ),\n      ]);\n    }\n\n    tableData.push([\n      oldLang('Stars.Transaction.Date'),\n      formatDateTimeToString(transaction.date * 1000, oldLang.code, true),\n    ]);\n\n    const footerText = oldLang('lng_credits_box_out_about');\n    const footerTextParts = footerText.split('{link}');\n\n    const footer = (\n      <span className={styles.footer}>\n        {footerTextParts[0]}\n        <SafeLink url={oldLang('StarsTOSLink')} text={oldLang('lng_credits_summary_options_about_link')} />\n        {footerTextParts[1]}\n      </span>\n    );\n\n    return {\n      header,\n      tableData,\n      footer,\n    };\n  }, [transaction, oldLang, lang, peer, topSticker, canPlayAnimatedEmojis]);\n\n  const prevModalData = usePrevious(starModalData);\n  const renderingModalData = prevModalData || starModalData;\n\n  return (\n    <TableInfoModal\n      isOpen={Boolean(transaction)}\n      className={styles.modal}\n      header={renderingModalData?.header}\n      tableData={renderingModalData?.tableData}\n      footer={renderingModalData?.footer}\n      buttonText={oldLang('OK')}\n      onClose={closeStarsTransactionModal}\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { modal }): StateProps => {\n    const peerId = modal?.transaction?.peer?.type === 'peer' && modal.transaction.peer.id;\n    const peer = peerId ? selectPeer(global, peerId) : undefined;\n\n    const starCount = modal?.transaction.stars;\n    const starsGiftSticker = modal?.transaction.isGift && selectGiftStickerForStars(global, starCount?.amount);\n\n    const starGiftStickerId = modal?.transaction.starGift?.stickerId;\n    const starGiftSticker = starGiftStickerId && selectStarGiftSticker(global, starGiftStickerId);\n\n    return {\n      peer,\n      canPlayAnimatedEmojis: selectCanPlayAnimatedEmojis(global),\n      topSticker: starGiftSticker || starsGiftSticker,\n    };\n  },\n)(StarsTransactionModal));\n\nfunction getStarsPeerTitleKey(peer: ApiStarsTransactionPeer) {\n  switch (peer.type) {\n    case 'appStore':\n      return 'AppStore';\n    case 'playMarket':\n      return 'PlayMarket';\n    case 'fragment':\n      return 'Fragment';\n    case 'premiumBot':\n      return 'StarsTransactionBot';\n    case 'ads':\n      return 'StarsTransactionAds';\n    case 'api':\n      return 'Stars.Intro.Transaction.TelegramBotApi.Subtitle';\n    default:\n      return 'Stars.Transaction.Unsupported.Title';\n  }\n}\n","import React from '../../lib/teact/teact';\n\nimport type { LangFn } from './types';\n\nimport { STARS_ICON_PLACEHOLDER } from '../../config';\n\nimport Icon from '../../components/common/icons/Icon';\nimport StarIcon from '../../components/common/icons/StarIcon';\n\nexport function formatStarsAsText(lang: LangFn, amount: number) {\n  return lang('StarsAmountText', { amount }, { pluralValue: amount });\n}\n\nexport function formatStarsAsIcon(lang: LangFn, amount: number, asFont?: boolean) {\n  const icon = asFont\n    ? <Icon name=\"star\" className=\"star-amount-icon\" />\n    : <StarIcon type=\"gold\" className=\"star-amount-icon\" size=\"adaptive\" />;\n  return lang('StarsAmount', { amount }, {\n    withNodes: true,\n    specialReplacement: {\n      [STARS_ICON_PLACEHOLDER]: icon,\n    },\n  });\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"BadgeButton-module__root\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsGiftingPickerModal-module__root\",\"transition\":\"StarsGiftingPickerModal-module__transition\",\"main\":\"StarsGiftingPickerModal-module__main\",\"filter\":\"StarsGiftingPickerModal-module__filter\",\"title\":\"StarsGiftingPickerModal-module__title\",\"buttons\":\"StarsGiftingPickerModal-module__buttons\",\"picker\":\"StarsGiftingPickerModal-module__picker\",\"avatars\":\"StarsGiftingPickerModal-module__avatars\",\"center\":\"StarsGiftingPickerModal-module__center\",\"description\":\"StarsGiftingPickerModal-module__description\",\"premiumFeatures\":\"StarsGiftingPickerModal-module__premiumFeatures\",\"options\":\"StarsGiftingPickerModal-module__options\",\"button\":\"StarsGiftingPickerModal-module__button\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftComposer-module__root\",\"header\":\"GiftComposer-module__header\",\"spacer\":\"GiftComposer-module__spacer\",\"title\":\"GiftComposer-module__title\",\"balance-container\":\"GiftComposer-module__balance-container\",\"balanceContainer\":\"GiftComposer-module__balance-container\",\"balance-caption\":\"GiftComposer-module__balance-caption\",\"balanceCaption\":\"GiftComposer-module__balance-caption\",\"star-balance\":\"GiftComposer-module__star-balance\",\"starBalance\":\"GiftComposer-module__star-balance\",\"balance\":\"GiftComposer-module__balance\",\"optionsSection\":\"GiftComposer-module__optionsSection\",\"checkboxTitle\":\"GiftComposer-module__checkboxTitle\",\"actionMessageView\":\"GiftComposer-module__actionMessageView\",\"messageInput\":\"GiftComposer-module__messageInput\",\"limited\":\"GiftComposer-module__limited\",\"footer\":\"GiftComposer-module__footer\",\"switcher\":\"GiftComposer-module__switcher\",\"description\":\"GiftComposer-module__description\",\"main-button\":\"GiftComposer-module__main-button\",\"mainButton\":\"GiftComposer-module__main-button\",\"star\":\"GiftComposer-module__star\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"GiftItem-module__container\",\"starGift\":\"GiftItem-module__starGift\",\"monthsDescription\":\"GiftItem-module__monthsDescription\",\"description\":\"GiftItem-module__description\",\"buy\":\"GiftItem-module__buy\",\"star\":\"GiftItem-module__star\",\"amount\":\"GiftItem-module__amount\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftModal-module__root\",\"transition\":\"GiftModal-module__transition\",\"content\":\"GiftModal-module__content\",\"main\":\"GiftModal-module__main\",\"giftSection\":\"GiftModal-module__giftSection\",\"section\":\"GiftModal-module__section\",\"starGiftsContainer\":\"GiftModal-module__starGiftsContainer\",\"premiumGiftsGallery\":\"GiftModal-module__premiumGiftsGallery\",\"header\":\"GiftModal-module__header\",\"headerSlide\":\"GiftModal-module__headerSlide\",\"headerText\":\"GiftModal-module__headerText\",\"hiddenHeader\":\"GiftModal-module__hiddenHeader\",\"commonHeaderText\":\"GiftModal-module__commonHeaderText\",\"closeButton\":\"GiftModal-module__closeButton\",\"balance\":\"GiftModal-module__balance\",\"avatars\":\"GiftModal-module__avatars\",\"logoBackground\":\"GiftModal-module__logoBackground\",\"center\":\"GiftModal-module__center\",\"description\":\"GiftModal-module__description\",\"starGiftsDescription\":\"GiftModal-module__starGiftsDescription\",\"boostIcon\":\"GiftModal-module__boostIcon\",\"optionBottom\":\"GiftModal-module__optionBottom\",\"secondaryInfo\":\"GiftModal-module__secondaryInfo\",\"footer\":\"GiftModal-module__footer\",\"starGiftsTransition\":\"GiftModal-module__starGiftsTransition\"};","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"StarGiftCategoryList-module__list\",\"item-selected\":\"StarGiftCategoryList-module__item-selected\",\"itemSelected\":\"StarGiftCategoryList-module__item-selected\",\"item\":\"StarGiftCategoryList-module__item\",\"selected-item\":\"StarGiftCategoryList-module__selected-item\",\"selectedItem\":\"StarGiftCategoryList-module__selected-item\",\"star\":\"StarGiftCategoryList-module__star\"};","// extracted by mini-css-extract-plugin\nexport default {\"header\":\"GiftInfoModal-module__header\",\"amount\":\"GiftInfoModal-module__amount\",\"title\":\"GiftInfoModal-module__title\",\"description\":\"GiftInfoModal-module__description\",\"soldOut\":\"GiftInfoModal-module__soldOut\",\"footerDescription\":\"GiftInfoModal-module__footerDescription\",\"unknown\":\"GiftInfoModal-module__unknown\",\"giftValue\":\"GiftInfoModal-module__giftValue\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"GiftRecipientPicker-module__root\",\"picker\":\"GiftRecipientPicker-module__picker\"};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"PaidReactionModal-module__content\",\"title\":\"PaidReactionModal-module__title\",\"slider\":\"PaidReactionModal-module__slider\",\"description\":\"PaidReactionModal-module__description\",\"modalBalance\":\"PaidReactionModal-module__modalBalance\",\"topLabel\":\"PaidReactionModal-module__topLabel\",\"top\":\"PaidReactionModal-module__top\",\"topBadge\":\"PaidReactionModal-module__topBadge\",\"buttonStar\":\"PaidReactionModal-module__buttonStar\",\"topPeer\":\"PaidReactionModal-module__topPeer\",\"checkbox\":\"PaidReactionModal-module__checkbox\",\"disclaimer\":\"PaidReactionModal-module__disclaimer\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarSlider-module__root\",\"slider\":\"StarSlider-module__slider\",\"sparkles\":\"StarSlider-module__sparkles\",\"progress\":\"StarSlider-module__progress\",\"floatingBadgeWrapper\":\"StarSlider-module__floatingBadgeWrapper\",\"floatingBadge\":\"StarSlider-module__floatingBadge\",\"floatingBadgeText\":\"StarSlider-module__floatingBadgeText\",\"floatingBadgeTriangle\":\"StarSlider-module__floatingBadgeTriangle\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsBalanceModal-module__root\",\"transition\":\"StarsBalanceModal-module__transition\",\"main\":\"StarsBalanceModal-module__main\",\"container\":\"StarsBalanceModal-module__container\",\"section\":\"StarsBalanceModal-module__section\",\"sectionTitle\":\"StarsBalanceModal-module__sectionTitle\",\"tos\":\"StarsBalanceModal-module__tos\",\"logo\":\"StarsBalanceModal-module__logo\",\"logoBackground\":\"StarsBalanceModal-module__logoBackground\",\"headerHext\":\"StarsBalanceModal-module__headerHext\",\"description\":\"StarsBalanceModal-module__description\",\"header\":\"StarsBalanceModal-module__header\",\"starHeaderText\":\"StarsBalanceModal-module__starHeaderText\",\"botItem\":\"StarsBalanceModal-module__botItem\",\"hiddenHeader\":\"StarsBalanceModal-module__hiddenHeader\",\"closeButton\":\"StarsBalanceModal-module__closeButton\",\"balance\":\"StarsBalanceModal-module__balance\",\"smallerText\":\"StarsBalanceModal-module__smallerText\",\"balanceBottom\":\"StarsBalanceModal-module__balanceBottom\",\"modalBalance\":\"StarsBalanceModal-module__modalBalance\",\"starButton\":\"StarsBalanceModal-module__starButton\",\"paymentContent\":\"StarsBalanceModal-module__paymentContent\",\"paymentImages\":\"StarsBalanceModal-module__paymentImages\",\"paymentPhoto\":\"StarsBalanceModal-module__paymentPhoto\",\"avatarStar\":\"StarsBalanceModal-module__avatarStar\",\"paymentImageBackground\":\"StarsBalanceModal-module__paymentImageBackground\",\"paymentButton\":\"StarsBalanceModal-module__paymentButton\",\"paymentButtonStar\":\"StarsBalanceModal-module__paymentButtonStar\",\"transactions\":\"StarsBalanceModal-module__transactions\",\"subscriptions\":\"StarsBalanceModal-module__subscriptions\",\"tabs\":\"StarsBalanceModal-module__tabs\",\"disclaimer\":\"StarsBalanceModal-module__disclaimer\",\"amountBadge\":\"StarsBalanceModal-module__amountBadge\",\"loadMore\":\"StarsBalanceModal-module__loadMore\",\"loadMoreIcon\":\"StarsBalanceModal-module__loadMoreIcon\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsGiftModal-module__root\",\"main\":\"StarsGiftModal-module__main\",\"headerInfo\":\"StarsGiftModal-module__headerInfo\",\"logo\":\"StarsGiftModal-module__logo\",\"logoBackground\":\"StarsGiftModal-module__logoBackground\",\"description\":\"StarsGiftModal-module__description\",\"section\":\"StarsGiftModal-module__section\",\"header\":\"StarsGiftModal-module__header\",\"starHeaderText\":\"StarsGiftModal-module__starHeaderText\",\"hiddenHeader\":\"StarsGiftModal-module__hiddenHeader\",\"closeButton\":\"StarsGiftModal-module__closeButton\",\"avatar\":\"StarsGiftModal-module__avatar\",\"center\":\"StarsGiftModal-module__center\",\"secondaryInfo\":\"StarsGiftModal-module__secondaryInfo\",\"modalDialog\":\"StarsGiftModal-module__modalDialog\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsSubscriptionItem-module__root\",\"info\":\"StarsSubscriptionItem-module__info\",\"subtitle\":\"StarsSubscriptionItem-module__subtitle\",\"status\":\"StarsSubscriptionItem-module__status\",\"statusPricing\":\"StarsSubscriptionItem-module__statusPricing\",\"amount\":\"StarsSubscriptionItem-module__amount\",\"title\":\"StarsSubscriptionItem-module__title\",\"description\":\"StarsSubscriptionItem-module__description\",\"statusPeriod\":\"StarsSubscriptionItem-module__statusPeriod\",\"statusEnded\":\"StarsSubscriptionItem-module__statusEnded\",\"preview\":\"StarsSubscriptionItem-module__preview\",\"subscriptionStar\":\"StarsSubscriptionItem-module__subscriptionStar\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"StarsSubscriptionModal-module__modal\",\"header\":\"StarsSubscriptionModal-module__header\",\"starsHeader\":\"StarsSubscriptionModal-module__starsHeader\",\"title\":\"StarsSubscriptionModal-module__title\",\"amount\":\"StarsSubscriptionModal-module__amount\",\"footer\":\"StarsSubscriptionModal-module__footer\",\"starsBackground\":\"StarsSubscriptionModal-module__starsBackground\",\"avatarWrapper\":\"StarsSubscriptionModal-module__avatarWrapper\",\"subscriptionStar\":\"StarsSubscriptionModal-module__subscriptionStar\",\"amountStar\":\"StarsSubscriptionModal-module__amountStar\",\"secondary\":\"StarsSubscriptionModal-module__secondary\",\"danger\":\"StarsSubscriptionModal-module__danger\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"PaidMediaThumb-module__root\",\"preview\":\"PaidMediaThumb-module__preview\",\"count\":\"PaidMediaThumb-module__count\",\"thumb\":\"PaidMediaThumb-module__thumb\",\"noOutline\":\"PaidMediaThumb-module__noOutline\",\"itemCount1\":\"PaidMediaThumb-module__itemCount1\",\"itemCount2\":\"PaidMediaThumb-module__itemCount2\",\"itemCount3\":\"PaidMediaThumb-module__itemCount3\",\"blurry\":\"PaidMediaThumb-module__blurry\",\"full\":\"PaidMediaThumb-module__full\",\"fadeIn\":\"PaidMediaThumb-module__fadeIn\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"StarsTransactionItem-module__root\",\"info\":\"StarsTransactionItem-module__info\",\"stars\":\"StarsTransactionItem-module__stars\",\"amount\":\"StarsTransactionItem-module__amount\",\"title\":\"StarsTransactionItem-module__title\",\"description\":\"StarsTransactionItem-module__description\",\"date\":\"StarsTransactionItem-module__date\",\"positive\":\"StarsTransactionItem-module__positive\",\"negative\":\"StarsTransactionItem-module__negative\",\"preview\":\"StarsTransactionItem-module__preview\",\"subscriptionStar\":\"StarsTransactionItem-module__subscriptionStar\"};","// extracted by mini-css-extract-plugin\nexport default {\"modal\":\"StarsTransactionModal-module__modal\",\"positive\":\"StarsTransactionModal-module__positive\",\"negative\":\"StarsTransactionModal-module__negative\",\"header\":\"StarsTransactionModal-module__header\",\"starsHeader\":\"StarsTransactionModal-module__starsHeader\",\"amount\":\"StarsTransactionModal-module__amount\",\"title\":\"StarsTransactionModal-module__title\",\"description\":\"StarsTransactionModal-module__description\",\"tid\":\"StarsTransactionModal-module__tid\",\"footer\":\"StarsTransactionModal-module__footer\",\"starsBackground\":\"StarsTransactionModal-module__starsBackground\",\"copyIcon\":\"StarsTransactionModal-module__copyIcon\",\"mediaPreview\":\"StarsTransactionModal-module__mediaPreview\",\"subtitle\":\"StarsTransactionModal-module__subtitle\",\"starGiftSticker\":\"StarsTransactionModal-module__starGiftSticker\"};"],"names":["default","StarsGiftModal","StarsGiftingPickerModal","StarsBalanceModal","StarPaymentModal","StarsTransactionInfoModal","StarsSubscriptionModal","PaidReactionModal","GiftModal","GiftRecipientPicker","GiftInfoModal","React","buildClassName","styles","BadgeButton","children","className","onClick","createElement","root","memo","useMemo","useState","getActions","getGlobal","withGlobal","SERVICE_NOTIFICATIONS_USER_ID","filterUsersByName","isDeletedUser","isUserBot","unique","sortChatIds","useLastCallback","useOldLang","PeerPicker","PickerModal","isOpen","currentUserId","activeListIds","archivedListIds","userIds","closeStarsGiftingPickerModal","openStarsGiftModal","oldLang","searchQuery","setSearchQuery","displayedUserIds","usersById","users","byId","combinedIds","filteredContactIds","filter","id","user","isSupport","handleSelectedUserIdsChange","newSelectedId","length","forUserId","onClose","title","hasCloseButton","shouldAdaptToSearch","withFixedHeight","confirmButtonText","onEnter","picker","itemIds","filterValue","filterPlaceholder","onFilterChange","isSearchable","withDefaultPadding","withStatus","onSelectedIdChange","global","chats","listIds","contactList","active","archived","STARS_CURRENCY_CODE","getUserFullName","selectTabState","selectTheme","selectUser","formatCurrency","formatStarsAsIcon","useLang","PremiumProgress","ActionMessage","Button","ListItem","Switcher","TextArea","LIMIT_DISPLAY_THRESHOLD","GiftComposer","gift","userId","captionLimit","patternColor","isPaymentFormLoading","sendStarGift","openInvoice","lang","giftMessage","setGiftMessage","shouldHideName","setShouldHideName","isStarGift","localMessage","chatId","isOutgoing","senderId","date","Math","floor","Date","now","content","action","targetUserIds","mediaType","text","type","amount","currency","months","message","translationValues","stars","starGift","undefined","isNameHidden","starsToConvert","isSaved","isConverted","handleGiftMessageChange","e","target","value","handleShouldHideNameChange","handleMainButtonClick","option","renderOptionsSection","symbolsLeft","optionsSection","messageInput","onChange","label","maxLength","maxLengthIndicator","toString","switcher","narrow","ripple","checked","renderFooter","userFullName","footer","description","profile","receiver","spacer","availabilityRemains","isPrimary","progress","availabilityTotal","rightText","count","leftText","limited","mainButton","isLoading","withNodes","actionMessageView","inert","style","key","theme","settings","themes","tabState","appConfig","starGiftMaxMessageLength","selectCanPlayAnimatedEmojis","selectGiftStickerForDuration","formatCurrencyAsString","AnimatedIconFromSticker","GiftRibbon","GIFT_STICKER_SIZE","GiftItemPremium","sticker","canPlayAnimatedEmojis","baseMonthAmount","handleGiftClick","perMonth","discount","ceil","renderMonths","caption","pluralValue","monthsDescription","container","tabIndex","role","play","noLoop","nonInteractive","size","buy","pill","fluid","Boolean","color","percent","Icon","GiftItemStar","openGiftInfoModal","isLimited","isSoldOut","withSparkleEffect","name","star","stickers","starGifts","stickerId","useEffect","useRef","useCurrentOrPrev","Avatar","SafeLink","Modal","Transition","BalanceBlock","GiftSendingOptions","StarGiftCategoryList","StarsBackground","PremiumGiftModal","modal","starGiftsById","starGiftCategoriesByName","starBalance","closeGiftModal","requestConfetti","dialogRef","transitionRef","giftHeaderRef","renderingModal","selectedGift","setSelectedGift","isHeaderHidden","setIsHeaderHidden","isHeaderForStarGifts","setIsHeaderForStarGifts","selectedCategory","setSelectedCategory","filteredGifts","gifts","sort","prevGift","baseGift","reduce","prev","showConfetti","dialog","current","top","left","width","height","querySelector","getBoundingClientRect","withStars","isCompleted","handleScroll","scrollTop","currentTarget","headerTop","transitionTop","giftPremiumDescription","link","url","starGiftDescription","renderGiftPremiumHeader","headerText","center","renderGiftPremiumDescription","renderStarGiftsHeader","ref","renderStarGiftsDescription","starGiftsDescription","renderStarGifts","starGiftsContainer","map","giftId","renderPremiumGifts","premiumGiftsGallery","onCategoryChanged","category","handleCloseButtonClick","renderMainScreen","main","onScroll","avatars","peer","logoBackground","src","alt","draggable","activeKey","getCategoryKey","starGiftsTransition","isBackButton","buttonClassName","isSlim","contentClassName","modalDialog","closeButton","round","ariaLabel","balance","header","hiddenHeader","Number","slideClassName","headerSlide","commonHeaderText","transition","boostPerSentGift","boostsPerSentGift","useHorizontalScroll","StarIcon","starCategories","Object","keys","a","b","handleItemClick","renderCategoryName","renderCategoryItem","item","selectedItem","list","selectStarGiftSticker","formatDateTimeToString","formatStarsAsText","CUSTOM_PEER_HIDDEN","getServerTime","formatInteger","renderTextWithEntities","useFlag","ConfirmDialog","Link","TableInfoModal","STICKER_SIZE","userFrom","targetUser","starGiftMaxConvertPeriod","closeGiftInfoModal","changeGiftVisilibity","convertGiftToStars","openChatWithInfo","isConvertConfirmOpen","openConvertConfirm","closeConvertConfirm","typeGift","isUserGift","userGift","canUpdate","fromId","messageId","isSender","canConvertDifference","conversionLeft","handleClose","handleTriggerVisibility","isUnsaved","shouldUnsave","handleConvertToStars","handleOpenProfile","profileTab","modalData","isVisibleForMe","withMarkdown","soldOut","tableData","push","Fragment","unknown","titleKey","code","firstSaleDate","lastSaleDate","giftValue","total","footerDescription","confirmHandler","closeGiftRecipientPicker","openGiftModal","selectedId","userSelectionLimit","giveawayAddPeersMax","STARS_ICON_PLACEHOLDER","getChatTitle","selectChat","selectChatMessage","renderText","PeerBadge","Checkbox","Separator","StarSlider","MAX_TOP_REACTORS","DEFAULT_STARS_AMOUNT","MAX_REACTION_AMOUNT","ANONYMOUS_PEER","avatarIcon","customPeerAvatarColor","isCustomPeer","chat","maxAmount","defaultPrivacy","closePaidReactionModal","addLocalPaidReaction","starsAmount","setStarsAmount","isTouched","markTouched","unmarkTouched","shouldShowUp","setShouldShowUp","handleAnonimityChange","handleAmountChange","currentReactor","reactions","topReactors","find","reactor","isMe","isAnonymous","handleSend","isPrivate","all","result","hasMe","forEach","peerId","localAmount","me","slice","chatTitle","hasAbsoluteCloseButton","modalBalance","slider","defaultValue","maxValue","topLabel","countText","topPeer","badgeText","badgeIcon","badgeClassName","topBadge","checkbox","specialReplacement","buttonStar","disclaimer","paidReactionMaxAmount","paidReactionPrivacy","requestMeasure","requestMutation","useEffectOnce","useResizeObserver","AnimatedCounter","Sparkles","DEFAULT_POINTS","floatingBadgeRef","points","i","setValue","getProgress","updateSafeBadgePosition","badge","parent","parentElement","safeMinX","offsetLeft","offsetWidth","safeMaxX","setProperty","handleChange","event","newValue","getValue","floatingBadgeWrapper","floatingBadge","floatingBadgeText","floatingBadgeIcon","floatingBadgeTriangle","viewBox","fill","x1","x2","y1","y2","offset","d","preset","sparkles","min","max","step","pointIndex","findIndex","point","prevPoint","nextPoint","formatStarsAmount","smallerText","balanceBottom","selectIsPremiumPurchaseBlocked","InfiniteScroll","TabList","StarTopupOptionList","StarsSubscriptionItem","StarsTransactionItem","StarLogo","TRANSACTION_TYPES","TRANSACTION_TABS","TRANSACTION_ITEM_CLASS","SUBSCRIPTION_PURPOSE","starsBalanceState","canBuyPremium","closeStarsBalanceModal","loadStarsTransactions","loadStarsSubscriptions","openStarsGiftingPickerModal","history","subscriptions","setHeaderHidden","selectedTabIndex","setSelectedTabIndex","areBuyOptionsShown","showBuyOptions","hideBuyOptions","originStarsPayment","originReaction","originGift","topup","shouldOpenOnBuy","ongoingTransactionAmount","form","invoice","totalAmount","subscriptionInfo","subscriptionPricing","balanceNeeded","starsNeeded","starsNeededText","channel","bot","botId","purpose","shouldShowItems","transactions","shouldSuggestGifting","tosText","parts","split","handleLoadMoreTransactions","handleLoadMoreSubscriptions","openStarsGiftingPickerModalHandler","handleBuyStars","starHeaderText","section","logo","starButton","topupOptions","options","tos","sectionTitle","subscription","nextOffset","isText","disabled","noForcedUpperCase","loadMore","loadMoreIcon","isRtl","renderCount","shouldRestoreHeight","onLoadMore","items","scrollContainerClosest","itemSelector","noFastList","transaction","isRefund","tabs","tabClassName","tab","activeTab","onSwitchTab","getCustomPeerFromInvite","usePrevious","PickerSelectedItem","PaidMediaThumb","paidMediaMessage","paidMediaChat","closeStarsPaymentModal","openStarsBalanceModal","sendStarPaymentForm","markLoading","unmarkLoading","inputInvoice","prevModal","isBotSubscription","subscriptionPeriod","canShowPeerItem","photo","descriptionText","botName","starsText","extendedMedia","paidMedia","areAllPhotos","every","media","duration","areAllVideos","mediaText","channelTitle","disclaimerText","inviteCustomPeer","handlePayment","paymentContent","paymentImages","dir","paymentPhoto","avatarStar","avatarWebPhoto","avatarSize","amountBadge","paymentImageBackground","botItem","paymentButton","messageInputInvoice","isPaidMedia","getSenderTitle","closeStarsGiftModal","selectedOption","setSelectedOption","handleClick","renderGiftTitle","bottomText","headerInfo","avatar","starsGiftOptions","secondaryInfo","buildStarsTransactionCustomPeer","formatPercent","getTransactionTitle","starRefCommision","isReaction","giveawayPostId","isMyGift","isGift","isNegativeStarsAmount","customPeer","nanos","selectPeer","formatDateToString","useSelector","selectProvidedPeer","openStarsSubscriptionModal","pricing","until","isCancelled","hasExpired","formattedDate","preview","subscriptionStar","info","subtitle","webPhoto","status","statusEnded","statusPricing","statusPeriod","isApiPeerUser","closeStarsSubscriptionModal","fulfillStarsSubscription","changeStarsSubscription","checkChatInvite","loadStarStatus","buttonState","canRefulfill","isActive","canRestart","chatInviteHash","invoiceSlug","handleButtonClick","hash","slug","starModalData","hasBotCancelled","starsHeader","avatarWrapper","starsBackground","amountStar","footerTos","secondary","danger","prevModalData","renderingModalData","getMediaHash","getMediaThumbUri","useMedia","MediaSpoiler","THUMB_LIMIT","PREVIEW_THUMB_LIMIT","isTransactionPreview","isLocked","reverse","arr","realIndex","thumb","isVisible","thumbDataUri","thumbnail","dataUri","SingleMediaThumb","noOutline","boughtMedia","index","video","mediaHash","mediaBlob","blurry","full","formatStarsTransactionAmount","CUSTOM_PEER_PREMIUM","selectOptionalPeer","openStarsTransactionModal","transactionPeer","data","avatarPeer","subtitleKey","hasFailed","isPending","negative","positive","MediaViewerOrigin","getMessageLink","selectGiftStickerForStars","copyTextToClipboard","StarsTransactionModal","topSticker","showNotification","openMediaViewer","closeStarsTransactionModal","handleOpenMedia","origin","StarsTransaction","standaloneMedia","flatMap","values","toName","getStarsPeerTitleKey","messageLink","giveawayMessageLink","mediaAmount","m","shouldDisplayAvatar","mediaPreview","peerLabel","tid","copyIcon","footerText","footerTextParts","buttonText","starCount","starsGiftSticker","starGiftStickerId","starGiftSticker","asFont","icon"],"sourceRoot":""}